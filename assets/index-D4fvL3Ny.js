(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(e){if(e.ep)return;e.ep=!0;const s=n(e);fetch(e.href,s)}})();const Vi="5";var kn;typeof window<"u"&&((kn=window.__svelte??(window.__svelte={})).v??(kn.v=new Set)).add(Vi);let Nn=!1,Di=!1;function Li(){Nn=!0}Li();const Fi=1,Ki=2,Fe=!1,ur=2,Pi=4,qn=8,Rn=16,hr=32,Br=64,Tr=128,zt=256,Or=512,Rt=1024,cr=2048,vr=4096,In=8192,Wr=16384,Xi=32768,zi=1<<19,Ui=1<<20,Ke=1<<21;var Yi=Array.prototype.indexOf;function Bi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}const Wi=new Map;function Tn(t){var r=t.effects;if(r!==null){t.effects=null;for(var n=0;n<r.length;n+=1)gr(r[n])}}function Gi(t){for(var r=t.parent;r!==null;){if((r.f&ur)===0)return r;r=r.parent}return null}function Qi(t){var r,n=At;Xe(Gi(t));try{Tn(t),r=Vn(t)}finally{Xe(n)}return r}function Ji(t){var r=Qi(t),n=(It||(t.f&zt)!==0)&&t.deps!==null?vr:Rt;$t(t,n),t.equals(r)||(t.v=r,t.wv=ts())}var Zi,Hi,ji;function Cr(t){return Hi.call(t)}function On(t){return ji.call(t)}function tr(t,r){return Cr(t)}function _r(t,r=1,n=!1){let i=t;for(;r--;)i=On(i);return i}let kr=!1,de=!1,$r=null,Ot=!1,Nr=[];let lt=null,rr=!1;function Pe(t){lt=t}let At=null;function Xe(t){At=t}let Ut=null,wt=null,ft=0,Mt=null,Cn=1,ze=0,It=!1;function ts(){return++Cn}function qe(t){var h;var r=t.f;if((r&cr)!==0)return!0;if((r&vr)!==0){var n=t.deps,i=(r&zt)!==0;if(n!==null){var e,s,a=(r&Or)!==0,o=i&&At!==null&&!It,l=n.length;if(a||o){var f=t,u=f.parent;for(e=0;e<l;e++)s=n[e],(a||!((h=s==null?void 0:s.reactions)!=null&&h.includes(f)))&&(s.reactions??(s.reactions=[])).push(f);a&&(f.f^=Or),o&&u!==null&&(u.f&zt)===0&&(f.f^=zt)}for(e=0;e<l;e++)if(s=n[e],qe(s)&&Ji(s),s.wv>t.wv)return!0}(!i||At!==null&&!It)&&$t(t,Rt)}return!1}function rs(t,r){for(var n=r;n!==null;){if((n.f&Tr)!==0)try{n.fn(t);return}catch{n.f^=Tr}n=n.parent}throw kr=!1,t}function es(t){return(t.f&Wr)===0&&(t.parent===null||(t.parent.f&Tr)===0)}function Gr(t,r,n,i){if(kr){if(n===null&&(kr=!1),es(r))throw t;return}n!==null&&(kr=!0);{rs(t,r);return}}function $n(t,r,n=!0){var i=t.reactions;if(i!==null)for(var e=0;e<i.length;e++){var s=i[e];Ut!=null&&Ut.includes(t)||((s.f&ur)!==0?$n(s,r,!1):r===s&&(n?$t(s,cr):(s.f&Rt)!==0&&$t(s,vr),os(s)))}}function Vn(t){var y;var r=wt,n=ft,i=Mt,e=lt,s=It,a=Ut,o=Bt,l=rr,f=t.f;wt=null,ft=0,Mt=null,It=(f&zt)!==0&&(rr||!Ot||lt===null),lt=(f&(hr|Br))===0?t:null,Ut=null,Ue(t.ctx),rr=!1,ze++,t.f|=Ke;try{var u=(0,t.fn)(),h=t.deps;if(wt!==null){var m;if(Vr(t,ft),h!==null&&ft>0)for(h.length=ft+wt.length,m=0;m<wt.length;m++)h[ft+m]=wt[m];else t.deps=h=wt;if(!It)for(m=ft;m<h.length;m++)((y=h[m]).reactions??(y.reactions=[])).push(t)}else h!==null&&ft<h.length&&(Vr(t,ft),h.length=ft);if(gs()&&Mt!==null&&!rr&&h!==null&&(t.f&(ur|vr|cr))===0)for(m=0;m<Mt.length;m++)$n(Mt[m],t);return e!==null&&(ze++,Mt!==null&&(i===null?i=Mt:i.push(...Mt))),u}finally{wt=r,ft=n,Mt=i,lt=e,It=s,Ut=a,Ue(o),rr=l,t.f^=Ke}}function ns(t,r){let n=r.reactions;if(n!==null){var i=Yi.call(n,t);if(i!==-1){var e=n.length-1;e===0?n=r.reactions=null:(n[i]=n[e],n.pop())}}n===null&&(r.f&ur)!==0&&(wt===null||!wt.includes(r))&&($t(r,vr),(r.f&(zt|Or))===0&&(r.f^=Or),Tn(r),Vr(r,0))}function Vr(t,r){var n=t.deps;if(n!==null)for(var i=r;i<n.length;i++)ns(t,n[i])}function Re(t){var r=t.f;if((r&Wr)===0){$t(t,Rt);var n=At,i=Bt,e=Ot;At=t,Ot=!0;try{(r&Rn)!==0?vs(t):Fn(t),Ln(t);var s=Vn(t);t.teardown=typeof s=="function"?s:null,t.wv=Cn;var a=t.deps,o;Fe&&Di&&t.f&cr}catch(l){Gr(l,t,n,i||t.ctx)}finally{Ot=e,At=n}}}function is(){try{Bi()}catch(t){if($r!==null)Gr(t,$r,null);else throw t}}function ss(){var t=Ot;try{var r=0;for(Ot=!0;Nr.length>0;){r++>1e3&&is();var n=Nr,i=n.length;Nr=[];for(var e=0;e<i;e++){var s=ls(n[e]);as(s)}}}finally{de=!1,Ot=t,$r=null,Wi.clear()}}function as(t){var r=t.length;if(r!==0)for(var n=0;n<r;n++){var i=t[n];if((i.f&(Wr|In))===0)try{qe(i)&&(Re(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Kn(i):i.fn=null))}catch(e){Gr(e,i,null,i.ctx)}}}function os(t){de||(de=!0,queueMicrotask(ss));for(var r=$r=t;r.parent!==null;){r=r.parent;var n=r.f;if((n&(Br|hr))!==0){if((n&Rt)===0)return;r.f^=Rt}}Nr.push(r)}function ls(t){for(var r=[],n=t;n!==null;){var i=n.f,e=(i&(hr|Br))!==0,s=e&&(i&Rt)!==0;if(!s&&(i&In)===0){if((i&Pi)!==0)r.push(n);else if(e)n.f^=Rt;else{var a=lt;try{lt=n,qe(n)&&Re(n)}catch(f){Gr(f,n,null,n.ctx)}finally{lt=a}}var o=n.first;if(o!==null){n=o;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)n=l.next,l=l.parent}return r}const fs=-7169;function $t(t,r){t.f=t.f&fs|r}function us(t,r){var n=r.last;n===null?r.last=r.first=t:(n.next=t,t.prev=n,r.last=t)}function Dn(t,r,n,i=!0){var e=At,s={ctx:Bt,deps:null,nodes_start:null,nodes_end:null,f:t|cr,first:null,fn:r,last:null,next:null,parent:e,prev:null,teardown:null,transitions:null,wv:0};try{Re(s),s.f|=Xi}catch(l){throw gr(s),l}var a=s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Ui|Tr))===0;if(!a&&i&&(e!==null&&us(s,e),lt!==null&&(lt.f&ur)!==0)){var o=lt;(o.effects??(o.effects=[])).push(s)}return s}function hs(t,r=0){return Dn(qn|Rn|r,t)}function cs(t,r=!0){return Dn(qn|hr,t,!0,r)}function Ln(t){var r=t.teardown;if(r!==null){const n=lt;Pe(null);try{r.call(null)}finally{Pe(n)}}}function Fn(t,r=!1){var n=t.first;for(t.first=t.last=null;n!==null;){var i=n.next;(n.f&Br)!==0?n.parent=null:gr(n,r),n=i}}function vs(t){for(var r=t.first;r!==null;){var n=r.next;(r.f&hr)===0&&gr(r),r=n}}function gr(t,r=!0){var n=!1;if((r||(t.f&zi)!==0)&&t.nodes_start!==null){for(var i=t.nodes_start,e=t.nodes_end;i!==null;){var s=i===e?null:On(i);i.remove(),i=s}n=!0}Fn(t,r&&!n),Vr(t,0),$t(t,Wr);var a=t.transitions;if(a!==null)for(const l of a)l.stop();Ln(t);var o=t.parent;o!==null&&o.first!==null&&Kn(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Kn(t){var r=t.parent,n=t.prev,i=t.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),r!==null&&(r.first===t&&(r.first=i),r.last===t&&(r.last=n))}let Bt=null;function Ue(t){Bt=t}function gs(){return!Nn||Bt!==null&&Bt.l===null}function Pn(t){var r=document.createElement("template");return r.innerHTML=t,r.content}function ye(t,r){var n=At;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=r)}function ms(t,r){var n=(r&Fi)!==0,i=(r&Ki)!==0,e,s=!t.startsWith("<!>");return()=>{e===void 0&&(e=Pn(s?t:"<!>"+t),n||(e=Cr(e)));var a=i||Zi?document.importNode(e,!0):e.cloneNode(!0);if(n){var o=Cr(a),l=a.lastChild;ye(o,l)}else ye(a,a);return a}}function ps(t,r){t!==null&&t.before(r)}function te(t,r,n,i,e){var s=t,a="",o;hs(()=>{a!==(a=r()??"")&&(o!==void 0&&(gr(o),o=void 0),a!==""&&(o=cs(()=>{var l=a+"",f=Pn(l);ye(Cr(f),f.lastChild),s.before(f)})))})}var ws={value:()=>{}};function Xn(){for(var t=0,r=arguments.length,n={},i;t<r;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new qr(n)}function qr(t){this._=t}function ds(t,r){return t.trim().split(/^|\s+/).map(function(n){var i="",e=n.indexOf(".");if(e>=0&&(i=n.slice(e+1),n=n.slice(0,e)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}qr.prototype=Xn.prototype={constructor:qr,on:function(t,r){var n=this._,i=ds(t+"",n),e,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((e=(t=i[s]).type)&&(e=ys(n[e],t.name)))return e;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++s<a;)if(e=(t=i[s]).type)n[e]=Ye(n[e],t.name,r);else if(r==null)for(e in n)n[e]=Ye(n[e],t.name,null);return this},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new qr(t)},call:function(t,r){if((e=arguments.length-2)>0)for(var n=new Array(e),i=0,e,s;i<e;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,e=s.length;i<e;++i)s[i].value.apply(r,n)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],e=0,s=i.length;e<s;++e)i[e].value.apply(r,n)}};function ys(t,r){for(var n=0,i=t.length,e;n<i;++n)if((e=t[n]).name===r)return e.value}function Ye(t,r,n){for(var i=0,e=t.length;i<e;++i)if(t[i].name===r){t[i]=ws,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:r,value:n}),t}var _e="http://www.w3.org/1999/xhtml";const Be={svg:"http://www.w3.org/2000/svg",xhtml:_e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qr(t){var r=t+="",n=r.indexOf(":");return n>=0&&(r=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Be.hasOwnProperty(r)?{space:Be[r],local:t}:t}function _s(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===_e&&r.documentElement.namespaceURI===_e?r.createElement(t):r.createElementNS(n,t)}}function bs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function zn(t){var r=Qr(t);return(r.local?bs:_s)(r)}function Ms(){}function Ie(t){return t==null?Ms:function(){return this.querySelector(t)}}function xs(t){typeof t!="function"&&(t=Ie(t));for(var r=this._groups,n=r.length,i=new Array(n),e=0;e<n;++e)for(var s=r[e],a=s.length,o=i[e]=new Array(a),l,f,u=0;u<a;++u)(l=s[u])&&(f=t.call(l,l.__data__,u,s))&&("__data__"in l&&(f.__data__=l.__data__),o[u]=f);return new ht(i,this._parents)}function Es(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function As(){return[]}function Un(t){return t==null?As:function(){return this.querySelectorAll(t)}}function Ss(t){return function(){return Es(t.apply(this,arguments))}}function ks(t){typeof t=="function"?t=Ss(t):t=Un(t);for(var r=this._groups,n=r.length,i=[],e=[],s=0;s<n;++s)for(var a=r[s],o=a.length,l,f=0;f<o;++f)(l=a[f])&&(i.push(t.call(l,l.__data__,f,a)),e.push(l));return new ht(i,e)}function Yn(t){return function(){return this.matches(t)}}function Bn(t){return function(r){return r.matches(t)}}var Ns=Array.prototype.find;function qs(t){return function(){return Ns.call(this.children,t)}}function Rs(){return this.firstElementChild}function Is(t){return this.select(t==null?Rs:qs(typeof t=="function"?t:Bn(t)))}var Ts=Array.prototype.filter;function Os(){return Array.from(this.children)}function Cs(t){return function(){return Ts.call(this.children,t)}}function $s(t){return this.selectAll(t==null?Os:Cs(typeof t=="function"?t:Bn(t)))}function Vs(t){typeof t!="function"&&(t=Yn(t));for(var r=this._groups,n=r.length,i=new Array(n),e=0;e<n;++e)for(var s=r[e],a=s.length,o=i[e]=[],l,f=0;f<a;++f)(l=s[f])&&t.call(l,l.__data__,f,s)&&o.push(l);return new ht(i,this._parents)}function Wn(t){return new Array(t.length)}function Ds(){return new ht(this._enter||this._groups.map(Wn),this._parents)}function Dr(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}Dr.prototype={constructor:Dr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ls(t){return function(){return t}}function Fs(t,r,n,i,e,s){for(var a=0,o,l=r.length,f=s.length;a<f;++a)(o=r[a])?(o.__data__=s[a],i[a]=o):n[a]=new Dr(t,s[a]);for(;a<l;++a)(o=r[a])&&(e[a]=o)}function Ks(t,r,n,i,e,s,a){var o,l,f=new Map,u=r.length,h=s.length,m=new Array(u),y;for(o=0;o<u;++o)(l=r[o])&&(m[o]=y=a.call(l,l.__data__,o,r)+"",f.has(y)?e[o]=l:f.set(y,l));for(o=0;o<h;++o)y=a.call(t,s[o],o,s)+"",(l=f.get(y))?(i[o]=l,l.__data__=s[o],f.delete(y)):n[o]=new Dr(t,s[o]);for(o=0;o<u;++o)(l=r[o])&&f.get(m[o])===l&&(e[o]=l)}function Ps(t){return t.__data__}function Xs(t,r){if(!arguments.length)return Array.from(this,Ps);var n=r?Ks:Fs,i=this._parents,e=this._groups;typeof t!="function"&&(t=Ls(t));for(var s=e.length,a=new Array(s),o=new Array(s),l=new Array(s),f=0;f<s;++f){var u=i[f],h=e[f],m=h.length,y=zs(t.call(u,u&&u.__data__,f,i)),d=y.length,_=o[f]=new Array(d),E=a[f]=new Array(d),p=l[f]=new Array(m);n(u,h,_,E,p,y,r);for(var b=0,q=0,O,T;b<d;++b)if(O=_[b]){for(b>=q&&(q=b+1);!(T=E[q])&&++q<d;);O._next=T||null}}return a=new ht(a,i),a._enter=o,a._exit=l,a}function zs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Us(){return new ht(this._exit||this._groups.map(Wn),this._parents)}function Ys(t,r,n){var i=this.enter(),e=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),r!=null&&(e=r(e),e&&(e=e.selection())),n==null?s.remove():n(s),i&&e?i.merge(e).order():e}function Bs(t){for(var r=t.selection?t.selection():t,n=this._groups,i=r._groups,e=n.length,s=i.length,a=Math.min(e,s),o=new Array(e),l=0;l<a;++l)for(var f=n[l],u=i[l],h=f.length,m=o[l]=new Array(h),y,d=0;d<h;++d)(y=f[d]||u[d])&&(m[d]=y);for(;l<e;++l)o[l]=n[l];return new ht(o,this._parents)}function Ws(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var i=t[r],e=i.length-1,s=i[e],a;--e>=0;)(a=i[e])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Gs(t){t||(t=Qs);function r(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var n=this._groups,i=n.length,e=new Array(i),s=0;s<i;++s){for(var a=n[s],o=a.length,l=e[s]=new Array(o),f,u=0;u<o;++u)(f=a[u])&&(l[u]=f);l.sort(r)}return new ht(e,this._parents).order()}function Qs(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}function Js(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Zs(){return Array.from(this)}function Hs(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],e=0,s=i.length;e<s;++e){var a=i[e];if(a)return a}return null}function js(){let t=0;for(const r of this)++t;return t}function ta(){return!this.node()}function ra(t){for(var r=this._groups,n=0,i=r.length;n<i;++n)for(var e=r[n],s=0,a=e.length,o;s<a;++s)(o=e[s])&&t.call(o,o.__data__,s,e);return this}function ea(t){return function(){this.removeAttribute(t)}}function na(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ia(t,r){return function(){this.setAttribute(t,r)}}function sa(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function aa(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function oa(t,r){return function(){var n=r.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function la(t,r){var n=Qr(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((r==null?n.local?na:ea:typeof r=="function"?n.local?oa:aa:n.local?sa:ia)(n,r))}function Gn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function fa(t){return function(){this.style.removeProperty(t)}}function ua(t,r,n){return function(){this.style.setProperty(t,r,n)}}function ha(t,r,n){return function(){var i=r.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function ca(t,r,n){return arguments.length>1?this.each((r==null?fa:typeof r=="function"?ha:ua)(t,r,n??"")):Wt(this.node(),t)}function Wt(t,r){return t.style.getPropertyValue(r)||Gn(t).getComputedStyle(t,null).getPropertyValue(r)}function va(t){return function(){delete this[t]}}function ga(t,r){return function(){this[t]=r}}function ma(t,r){return function(){var n=r.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function pa(t,r){return arguments.length>1?this.each((r==null?va:typeof r=="function"?ma:ga)(t,r)):this.node()[t]}function Qn(t){return t.trim().split(/^|\s+/)}function Te(t){return t.classList||new Jn(t)}function Jn(t){this._node=t,this._names=Qn(t.getAttribute("class")||"")}Jn.prototype={add:function(t){var r=this._names.indexOf(t);r<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Zn(t,r){for(var n=Te(t),i=-1,e=r.length;++i<e;)n.add(r[i])}function Hn(t,r){for(var n=Te(t),i=-1,e=r.length;++i<e;)n.remove(r[i])}function wa(t){return function(){Zn(this,t)}}function da(t){return function(){Hn(this,t)}}function ya(t,r){return function(){(r.apply(this,arguments)?Zn:Hn)(this,t)}}function _a(t,r){var n=Qn(t+"");if(arguments.length<2){for(var i=Te(this.node()),e=-1,s=n.length;++e<s;)if(!i.contains(n[e]))return!1;return!0}return this.each((typeof r=="function"?ya:r?wa:da)(n,r))}function ba(){this.textContent=""}function Ma(t){return function(){this.textContent=t}}function xa(t){return function(){var r=t.apply(this,arguments);this.textContent=r??""}}function Ea(t){return arguments.length?this.each(t==null?ba:(typeof t=="function"?xa:Ma)(t)):this.node().textContent}function Aa(){this.innerHTML=""}function Sa(t){return function(){this.innerHTML=t}}function ka(t){return function(){var r=t.apply(this,arguments);this.innerHTML=r??""}}function Na(t){return arguments.length?this.each(t==null?Aa:(typeof t=="function"?ka:Sa)(t)):this.node().innerHTML}function qa(){this.nextSibling&&this.parentNode.appendChild(this)}function Ra(){return this.each(qa)}function Ia(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ta(){return this.each(Ia)}function Oa(t){var r=typeof t=="function"?t:zn(t);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function Ca(){return null}function $a(t,r){var n=typeof t=="function"?t:zn(t),i=r==null?Ca:typeof r=="function"?r:Ie(r);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Va(){var t=this.parentNode;t&&t.removeChild(this)}function Da(){return this.each(Va)}function La(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Fa(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Ka(t){return this.select(t?Fa:La)}function Pa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Xa(t){return function(r){t.call(this,r,this.__data__)}}function za(t){return t.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");return i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),{type:r,name:n}})}function Ua(t){return function(){var r=this.__on;if(r){for(var n=0,i=-1,e=r.length,s;n<e;++n)s=r[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):r[++i]=s;++i?r.length=i:delete this.__on}}}function Ya(t,r,n){return function(){var i=this.__on,e,s=Xa(r);if(i){for(var a=0,o=i.length;a<o;++a)if((e=i[a]).type===t.type&&e.name===t.name){this.removeEventListener(e.type,e.listener,e.options),this.addEventListener(e.type,e.listener=s,e.options=n),e.value=r;return}}this.addEventListener(t.type,s,n),e={type:t.type,name:t.name,value:r,listener:s,options:n},i?i.push(e):this.__on=[e]}}function Ba(t,r,n){var i=za(t+""),e,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,f=o.length,u;l<f;++l)for(e=0,u=o[l];e<s;++e)if((a=i[e]).type===u.type&&a.name===u.name)return u.value}return}for(o=r?Ya:Ua,e=0;e<s;++e)this.each(o(i[e],r,n));return this}function jn(t,r,n){var i=Gn(t),e=i.CustomEvent;typeof e=="function"?e=new e(r,n):(e=i.document.createEvent("Event"),n?(e.initEvent(r,n.bubbles,n.cancelable),e.detail=n.detail):e.initEvent(r,!1,!1)),t.dispatchEvent(e)}function Wa(t,r){return function(){return jn(this,t,r)}}function Ga(t,r){return function(){return jn(this,t,r.apply(this,arguments))}}function Qa(t,r){return this.each((typeof r=="function"?Ga:Wa)(t,r))}function*Ja(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],e=0,s=i.length,a;e<s;++e)(a=i[e])&&(yield a)}var Za=[null];function ht(t,r){this._groups=t,this._parents=r}function mr(){return new ht([[document.documentElement]],Za)}function Ha(){return this}ht.prototype=mr.prototype={constructor:ht,select:xs,selectAll:ks,selectChild:Is,selectChildren:$s,filter:Vs,data:Xs,enter:Ds,exit:Us,join:Ys,merge:Bs,selection:Ha,order:Ws,sort:Gs,call:Js,nodes:Zs,node:Hs,size:js,empty:ta,each:ra,attr:la,style:ca,property:pa,classed:_a,text:Ea,html:Na,raise:Ra,lower:Ta,append:Oa,insert:$a,remove:Da,clone:Ka,datum:Pa,on:Ba,dispatch:Qa,[Symbol.iterator]:Ja};function Oe(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function ti(t,r){var n=Object.create(t.prototype);for(var i in r)n[i]=r[i];return n}function pr(){}var ar=.7,Lr=1/ar,Yt="\\s*([+-]?\\d+)\\s*",or="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ja=/^#([0-9a-f]{3,8})$/,to=new RegExp(`^rgb\\(${Yt},${Yt},${Yt}\\)$`),ro=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),eo=new RegExp(`^rgba\\(${Yt},${Yt},${Yt},${or}\\)$`),no=new RegExp(`^rgba\\(${dt},${dt},${dt},${or}\\)$`),io=new RegExp(`^hsl\\(${or},${dt},${dt}\\)$`),so=new RegExp(`^hsla\\(${or},${dt},${dt},${or}\\)$`),We={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Oe(pr,lr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ge,formatHex:Ge,formatHex8:ao,formatHsl:oo,formatRgb:Qe,toString:Qe});function Ge(){return this.rgb().formatHex()}function ao(){return this.rgb().formatHex8()}function oo(){return ri(this).formatHsl()}function Qe(){return this.rgb().formatRgb()}function lr(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=ja.exec(t))?(n=r[1].length,r=parseInt(r[1],16),n===6?Je(r):n===3?new et(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?br(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?br(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=to.exec(t))?new et(r[1],r[2],r[3],1):(r=ro.exec(t))?new et(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=eo.exec(t))?br(r[1],r[2],r[3],r[4]):(r=no.exec(t))?br(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=io.exec(t))?je(r[1],r[2]/100,r[3]/100,1):(r=so.exec(t))?je(r[1],r[2]/100,r[3]/100,r[4]):We.hasOwnProperty(t)?Je(We[t]):t==="transparent"?new et(NaN,NaN,NaN,0):null}function Je(t){return new et(t>>16&255,t>>8&255,t&255,1)}function br(t,r,n,i){return i<=0&&(t=r=n=NaN),new et(t,r,n,i)}function lo(t){return t instanceof pr||(t=lr(t)),t?(t=t.rgb(),new et(t.r,t.g,t.b,t.opacity)):new et}function be(t,r,n,i){return arguments.length===1?lo(t):new et(t,r,n,i??1)}function et(t,r,n,i){this.r=+t,this.g=+r,this.b=+n,this.opacity=+i}Oe(et,be,ti(pr,{brighter(t){return t=t==null?Lr:Math.pow(Lr,t),new et(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ar:Math.pow(ar,t),new et(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new et(Ct(this.r),Ct(this.g),Ct(this.b),Fr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ze,formatHex:Ze,formatHex8:fo,formatRgb:He,toString:He}));function Ze(){return`#${Tt(this.r)}${Tt(this.g)}${Tt(this.b)}`}function fo(){return`#${Tt(this.r)}${Tt(this.g)}${Tt(this.b)}${Tt((isNaN(this.opacity)?1:this.opacity)*255)}`}function He(){const t=Fr(this.opacity);return`${t===1?"rgb(":"rgba("}${Ct(this.r)}, ${Ct(this.g)}, ${Ct(this.b)}${t===1?")":`, ${t})`}`}function Fr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ct(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Tt(t){return t=Ct(t),(t<16?"0":"")+t.toString(16)}function je(t,r,n,i){return i<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new ut(t,r,n,i)}function ri(t){if(t instanceof ut)return new ut(t.h,t.s,t.l,t.opacity);if(t instanceof pr||(t=lr(t)),!t)return new ut;if(t instanceof ut)return t;t=t.rgb();var r=t.r/255,n=t.g/255,i=t.b/255,e=Math.min(r,n,i),s=Math.max(r,n,i),a=NaN,o=s-e,l=(s+e)/2;return o?(r===s?a=(n-i)/o+(n<i)*6:n===s?a=(i-r)/o+2:a=(r-n)/o+4,o/=l<.5?s+e:2-s-e,a*=60):o=l>0&&l<1?0:a,new ut(a,o,l,t.opacity)}function uo(t,r,n,i){return arguments.length===1?ri(t):new ut(t,r,n,i??1)}function ut(t,r,n,i){this.h=+t,this.s=+r,this.l=+n,this.opacity=+i}Oe(ut,uo,ti(pr,{brighter(t){return t=t==null?Lr:Math.pow(Lr,t),new ut(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ar:Math.pow(ar,t),new ut(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,e=2*n-i;return new et(re(t>=240?t-240:t+120,e,i),re(t,e,i),re(t<120?t+240:t-120,e,i),this.opacity)},clamp(){return new ut(tn(this.h),Mr(this.s),Mr(this.l),Fr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fr(this.opacity);return`${t===1?"hsl(":"hsla("}${tn(this.h)}, ${Mr(this.s)*100}%, ${Mr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function tn(t){return t=(t||0)%360,t<0?t+360:t}function Mr(t){return Math.max(0,Math.min(1,t||0))}function re(t,r,n){return(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)*255}const ei=t=>()=>t;function ho(t,r){return function(n){return t+n*r}}function co(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(i){return Math.pow(t+i*r,n)}}function vo(t){return(t=+t)==1?ni:function(r,n){return n-r?co(r,n,t):ei(isNaN(r)?n:r)}}function ni(t,r){var n=r-t;return n?ho(t,n):ei(isNaN(t)?r:t)}const rn=function t(r){var n=vo(r);function i(e,s){var a=n((e=be(e)).r,(s=be(s)).r),o=n(e.g,s.g),l=n(e.b,s.b),f=ni(e.opacity,s.opacity);return function(u){return e.r=a(u),e.g=o(u),e.b=l(u),e.opacity=f(u),e+""}}return i.gamma=t,i}(1);function qt(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}var Me=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ee=new RegExp(Me.source,"g");function go(t){return function(){return t}}function mo(t){return function(r){return t(r)+""}}function po(t,r){var n=Me.lastIndex=ee.lastIndex=0,i,e,s,a=-1,o=[],l=[];for(t=t+"",r=r+"";(i=Me.exec(t))&&(e=ee.exec(r));)(s=e.index)>n&&(s=r.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(e=e[0])?o[a]?o[a]+=e:o[++a]=e:(o[++a]=null,l.push({i:a,x:qt(i,e)})),n=ee.lastIndex;return n<r.length&&(s=r.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?mo(l[0].x):go(r):(r=l.length,function(f){for(var u=0,h;u<r;++u)o[(h=l[u]).i]=h.x(f);return o.join("")})}var en=180/Math.PI,xe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ii(t,r,n,i,e,s){var a,o,l;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(l=t*n+r*i)&&(n-=t*l,i-=r*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),t*i<r*n&&(t=-t,r=-r,l=-l,a=-a),{translateX:e,translateY:s,rotate:Math.atan2(r,t)*en,skewX:Math.atan(l)*en,scaleX:a,scaleY:o}}var xr;function wo(t){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?xe:ii(r.a,r.b,r.c,r.d,r.e,r.f)}function yo(t){return t==null||(xr||(xr=document.createElementNS("http://www.w3.org/2000/svg","g")),xr.setAttribute("transform",t),!(t=xr.transform.baseVal.consolidate()))?xe:(t=t.matrix,ii(t.a,t.b,t.c,t.d,t.e,t.f))}function si(t,r,n,i){function e(f){return f.length?f.pop()+" ":""}function s(f,u,h,m,y,d){if(f!==h||u!==m){var _=y.push("translate(",null,r,null,n);d.push({i:_-4,x:qt(f,h)},{i:_-2,x:qt(u,m)})}else(h||m)&&y.push("translate("+h+r+m+n)}function a(f,u,h,m){f!==u?(f-u>180?u+=360:u-f>180&&(f+=360),m.push({i:h.push(e(h)+"rotate(",null,i)-2,x:qt(f,u)})):u&&h.push(e(h)+"rotate("+u+i)}function o(f,u,h,m){f!==u?m.push({i:h.push(e(h)+"skewX(",null,i)-2,x:qt(f,u)}):u&&h.push(e(h)+"skewX("+u+i)}function l(f,u,h,m,y,d){if(f!==h||u!==m){var _=y.push(e(y)+"scale(",null,",",null,")");d.push({i:_-4,x:qt(f,h)},{i:_-2,x:qt(u,m)})}else(h!==1||m!==1)&&y.push(e(y)+"scale("+h+","+m+")")}return function(f,u){var h=[],m=[];return f=t(f),u=t(u),s(f.translateX,f.translateY,u.translateX,u.translateY,h,m),a(f.rotate,u.rotate,h,m),o(f.skewX,u.skewX,h,m),l(f.scaleX,f.scaleY,u.scaleX,u.scaleY,h,m),f=u=null,function(y){for(var d=-1,_=m.length,E;++d<_;)h[(E=m[d]).i]=E.x(y);return h.join("")}}}var _o=si(wo,"px, ","px)","deg)"),bo=si(yo,", ",")",")"),Gt=0,nr=0,er=0,ai=1e3,Kr,ir,Pr=0,Vt=0,Jr=0,fr=typeof performance=="object"&&performance.now?performance:Date,oi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ce(){return Vt||(oi(Mo),Vt=fr.now()+Jr)}function Mo(){Vt=0}function Xr(){this._call=this._time=this._next=null}Xr.prototype=li.prototype={constructor:Xr,restart:function(t,r,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ce():+n)+(r==null?0:+r),!this._next&&ir!==this&&(ir?ir._next=this:Kr=this,ir=this),this._call=t,this._time=n,Ee()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ee())}};function li(t,r,n){var i=new Xr;return i.restart(t,r,n),i}function xo(){Ce(),++Gt;for(var t=Kr,r;t;)(r=Vt-t._time)>=0&&t._call.call(void 0,r),t=t._next;--Gt}function nn(){Vt=(Pr=fr.now())+Jr,Gt=nr=0;try{xo()}finally{Gt=0,Ao(),Vt=0}}function Eo(){var t=fr.now(),r=t-Pr;r>ai&&(Jr-=r,Pr=t)}function Ao(){for(var t,r=Kr,n,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(n=r._next,r._next=null,r=t?t._next=n:Kr=n);ir=t,Ee(i)}function Ee(t){if(!Gt){nr&&(nr=clearTimeout(nr));var r=t-Vt;r>24?(t<1/0&&(nr=setTimeout(nn,t-fr.now()-Jr)),er&&(er=clearInterval(er))):(er||(Pr=fr.now(),er=setInterval(Eo,ai)),Gt=1,oi(nn))}}function sn(t,r,n){var i=new Xr;return r=r==null?0:+r,i.restart(e=>{i.stop(),t(e+r)},r,n),i}var So=Xn("start","end","cancel","interrupt"),ko=[],fi=0,an=1,Ae=2,Rr=3,on=4,Se=5,Ir=6;function Zr(t,r,n,i,e,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;No(t,n,{name:r,index:i,group:e,on:So,tween:ko,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fi})}function $e(t,r){var n=vt(t,r);if(n.state>fi)throw new Error("too late; already scheduled");return n}function yt(t,r){var n=vt(t,r);if(n.state>Rr)throw new Error("too late; already running");return n}function vt(t,r){var n=t.__transition;if(!n||!(n=n[r]))throw new Error("transition not found");return n}function No(t,r,n){var i=t.__transition,e;i[r]=n,n.timer=li(s,0,n.time);function s(f){n.state=an,n.timer.restart(a,n.delay,n.time),n.delay<=f&&a(f-n.delay)}function a(f){var u,h,m,y;if(n.state!==an)return l();for(u in i)if(y=i[u],y.name===n.name){if(y.state===Rr)return sn(a);y.state===on?(y.state=Ir,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete i[u]):+u<r&&(y.state=Ir,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete i[u])}if(sn(function(){n.state===Rr&&(n.state=on,n.timer.restart(o,n.delay,n.time),o(f))}),n.state=Ae,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ae){for(n.state=Rr,e=new Array(m=n.tween.length),u=0,h=-1;u<m;++u)(y=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(e[++h]=y);e.length=h+1}}function o(f){for(var u=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(l),n.state=Se,1),h=-1,m=e.length;++h<m;)e[h].call(t,u);n.state===Se&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Ir,n.timer.stop(),delete i[r];for(var f in i)return;delete t.__transition}}function qo(t,r){var n=t.__transition,i,e,s=!0,a;if(n){r=r==null?null:r+"";for(a in n){if((i=n[a]).name!==r){s=!1;continue}e=i.state>Ae&&i.state<Se,i.state=Ir,i.timer.stop(),i.on.call(e?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}s&&delete t.__transition}}function Ro(t){return this.each(function(){qo(this,t)})}function Io(t,r){var n,i;return function(){var e=yt(this,t),s=e.tween;if(s!==n){i=n=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===r){i=i.slice(),i.splice(a,1);break}}e.tween=i}}function To(t,r,n){var i,e;if(typeof n!="function")throw new Error;return function(){var s=yt(this,t),a=s.tween;if(a!==i){e=(i=a).slice();for(var o={name:r,value:n},l=0,f=e.length;l<f;++l)if(e[l].name===r){e[l]=o;break}l===f&&e.push(o)}s.tween=e}}function Oo(t,r){var n=this._id;if(t+="",arguments.length<2){for(var i=vt(this.node(),n).tween,e=0,s=i.length,a;e<s;++e)if((a=i[e]).name===t)return a.value;return null}return this.each((r==null?Io:To)(n,t,r))}function Ve(t,r,n){var i=t._id;return t.each(function(){var e=yt(this,i);(e.value||(e.value={}))[r]=n.apply(this,arguments)}),function(e){return vt(e,i).value[r]}}function ui(t,r){var n;return(typeof r=="number"?qt:r instanceof lr?rn:(n=lr(r))?(r=n,rn):po)(t,r)}function Co(t){return function(){this.removeAttribute(t)}}function $o(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vo(t,r,n){var i,e=n+"",s;return function(){var a=this.getAttribute(t);return a===e?null:a===i?s:s=r(i=a,n)}}function Do(t,r,n){var i,e=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===e?null:a===i?s:s=r(i=a,n)}}function Lo(t,r,n){var i,e,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=o+"",a===l?null:a===i&&l===e?s:(e=l,s=r(i=a,o)))}}function Fo(t,r,n){var i,e,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=o+"",a===l?null:a===i&&l===e?s:(e=l,s=r(i=a,o)))}}function Ko(t,r){var n=Qr(t),i=n==="transform"?bo:ui;return this.attrTween(t,typeof r=="function"?(n.local?Fo:Lo)(n,i,Ve(this,"attr."+t,r)):r==null?(n.local?$o:Co)(n):(n.local?Do:Vo)(n,i,r))}function Po(t,r){return function(n){this.setAttribute(t,r.call(this,n))}}function Xo(t,r){return function(n){this.setAttributeNS(t.space,t.local,r.call(this,n))}}function zo(t,r){var n,i;function e(){var s=r.apply(this,arguments);return s!==i&&(n=(i=s)&&Xo(t,s)),n}return e._value=r,e}function Uo(t,r){var n,i;function e(){var s=r.apply(this,arguments);return s!==i&&(n=(i=s)&&Po(t,s)),n}return e._value=r,e}function Yo(t,r){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(r==null)return this.tween(n,null);if(typeof r!="function")throw new Error;var i=Qr(t);return this.tween(n,(i.local?zo:Uo)(i,r))}function Bo(t,r){return function(){$e(this,t).delay=+r.apply(this,arguments)}}function Wo(t,r){return r=+r,function(){$e(this,t).delay=r}}function Go(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Bo:Wo)(r,t)):vt(this.node(),r).delay}function Qo(t,r){return function(){yt(this,t).duration=+r.apply(this,arguments)}}function Jo(t,r){return r=+r,function(){yt(this,t).duration=r}}function Zo(t){var r=this._id;return arguments.length?this.each((typeof t=="function"?Qo:Jo)(r,t)):vt(this.node(),r).duration}function Ho(t,r){if(typeof r!="function")throw new Error;return function(){yt(this,t).ease=r}}function jo(t){var r=this._id;return arguments.length?this.each(Ho(r,t)):vt(this.node(),r).ease}function tl(t,r){return function(){var n=r.apply(this,arguments);if(typeof n!="function")throw new Error;yt(this,t).ease=n}}function rl(t){if(typeof t!="function")throw new Error;return this.each(tl(this._id,t))}function el(t){typeof t!="function"&&(t=Yn(t));for(var r=this._groups,n=r.length,i=new Array(n),e=0;e<n;++e)for(var s=r[e],a=s.length,o=i[e]=[],l,f=0;f<a;++f)(l=s[f])&&t.call(l,l.__data__,f,s)&&o.push(l);return new St(i,this._parents,this._name,this._id)}function nl(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,n=t._groups,i=r.length,e=n.length,s=Math.min(i,e),a=new Array(i),o=0;o<s;++o)for(var l=r[o],f=n[o],u=l.length,h=a[o]=new Array(u),m,y=0;y<u;++y)(m=l[y]||f[y])&&(h[y]=m);for(;o<i;++o)a[o]=r[o];return new St(a,this._parents,this._name,this._id)}function il(t){return(t+"").trim().split(/^|\s+/).every(function(r){var n=r.indexOf(".");return n>=0&&(r=r.slice(0,n)),!r||r==="start"})}function sl(t,r,n){var i,e,s=il(r)?$e:yt;return function(){var a=s(this,t),o=a.on;o!==i&&(e=(i=o).copy()).on(r,n),a.on=e}}function al(t,r){var n=this._id;return arguments.length<2?vt(this.node(),n).on.on(t):this.each(sl(n,t,r))}function ol(t){return function(){var r=this.parentNode;for(var n in this.__transition)if(+n!==t)return;r&&r.removeChild(this)}}function ll(){return this.on("end.remove",ol(this._id))}function fl(t){var r=this._name,n=this._id;typeof t!="function"&&(t=Ie(t));for(var i=this._groups,e=i.length,s=new Array(e),a=0;a<e;++a)for(var o=i[a],l=o.length,f=s[a]=new Array(l),u,h,m=0;m<l;++m)(u=o[m])&&(h=t.call(u,u.__data__,m,o))&&("__data__"in u&&(h.__data__=u.__data__),f[m]=h,Zr(f[m],r,n,m,f,vt(u,n)));return new St(s,this._parents,r,n)}function ul(t){var r=this._name,n=this._id;typeof t!="function"&&(t=Un(t));for(var i=this._groups,e=i.length,s=[],a=[],o=0;o<e;++o)for(var l=i[o],f=l.length,u,h=0;h<f;++h)if(u=l[h]){for(var m=t.call(u,u.__data__,h,l),y,d=vt(u,n),_=0,E=m.length;_<E;++_)(y=m[_])&&Zr(y,r,n,_,m,d);s.push(m),a.push(u)}return new St(s,a,r,n)}var hl=mr.prototype.constructor;function cl(){return new hl(this._groups,this._parents)}function vl(t,r){var n,i,e;return function(){var s=Wt(this,t),a=(this.style.removeProperty(t),Wt(this,t));return s===a?null:s===n&&a===i?e:e=r(n=s,i=a)}}function hi(t){return function(){this.style.removeProperty(t)}}function gl(t,r,n){var i,e=n+"",s;return function(){var a=Wt(this,t);return a===e?null:a===i?s:s=r(i=a,n)}}function ml(t,r,n){var i,e,s;return function(){var a=Wt(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Wt(this,t))),a===l?null:a===i&&l===e?s:(e=l,s=r(i=a,o))}}function pl(t,r){var n,i,e,s="style."+r,a="end."+s,o;return function(){var l=yt(this,t),f=l.on,u=l.value[s]==null?o||(o=hi(r)):void 0;(f!==n||e!==u)&&(i=(n=f).copy()).on(a,e=u),l.on=i}}function wl(t,r,n){var i=(t+="")=="transform"?_o:ui;return r==null?this.styleTween(t,vl(t,i)).on("end.style."+t,hi(t)):typeof r=="function"?this.styleTween(t,ml(t,i,Ve(this,"style."+t,r))).each(pl(this._id,t)):this.styleTween(t,gl(t,i,r),n).on("end.style."+t,null)}function dl(t,r,n){return function(i){this.style.setProperty(t,r.call(this,i),n)}}function yl(t,r,n){var i,e;function s(){var a=r.apply(this,arguments);return a!==e&&(i=(e=a)&&dl(t,a,n)),i}return s._value=r,s}function _l(t,r,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(r==null)return this.tween(i,null);if(typeof r!="function")throw new Error;return this.tween(i,yl(t,r,n??""))}function bl(t){return function(){this.textContent=t}}function Ml(t){return function(){var r=t(this);this.textContent=r??""}}function xl(t){return this.tween("text",typeof t=="function"?Ml(Ve(this,"text",t)):bl(t==null?"":t+""))}function El(t){return function(r){this.textContent=t.call(this,r)}}function Al(t){var r,n;function i(){var e=t.apply(this,arguments);return e!==n&&(r=(n=e)&&El(e)),r}return i._value=t,i}function Sl(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Al(t))}function kl(){for(var t=this._name,r=this._id,n=ci(),i=this._groups,e=i.length,s=0;s<e;++s)for(var a=i[s],o=a.length,l,f=0;f<o;++f)if(l=a[f]){var u=vt(l,r);Zr(l,t,n,f,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new St(i,this._parents,t,n)}function Nl(){var t,r,n=this,i=n._id,e=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--e===0&&s()}};n.each(function(){var f=yt(this,i),u=f.on;u!==t&&(r=(t=u).copy(),r._.cancel.push(o),r._.interrupt.push(o),r._.end.push(l)),f.on=r}),e===0&&s()})}var ql=0;function St(t,r,n,i){this._groups=t,this._parents=r,this._name=n,this._id=i}function ci(){return++ql}var xt=mr.prototype;St.prototype={constructor:St,select:fl,selectAll:ul,selectChild:xt.selectChild,selectChildren:xt.selectChildren,filter:el,merge:nl,selection:cl,transition:kl,call:xt.call,nodes:xt.nodes,node:xt.node,size:xt.size,empty:xt.empty,each:xt.each,on:al,attr:Ko,attrTween:Yo,style:wl,styleTween:_l,text:xl,textTween:Sl,remove:ll,tween:Oo,delay:Go,duration:Zo,ease:jo,easeVarying:rl,end:Nl,[Symbol.iterator]:xt[Symbol.iterator]};function Rl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Il={time:null,delay:0,duration:250,ease:Rl};function Tl(t,r){for(var n;!(n=t.__transition)||!(n=n[r]);)if(!(t=t.parentNode))throw new Error(`transition ${r} not found`);return n}function Ol(t){var r,n;t instanceof St?(r=t._id,t=t._name):(r=ci(),(n=Il).time=Ce(),t=t==null?null:t+"");for(var i=this._groups,e=i.length,s=0;s<e;++s)for(var a=i[s],o=a.length,l,f=0;f<o;++f)(l=a[f])&&Zr(l,t,r,f,a,n||Tl(l,r));return new St(i,this._parents,t,r)}mr.prototype.interrupt=Ro;mr.prototype.transition=Ol;function sr(t,r,n){this.k=t,this.x=r,this.y=n}sr.prototype={constructor:sr,scale:function(t){return t===1?this:new sr(this.k*t,this.x,this.y)},translate:function(t,r){return t===0&r===0?this:new sr(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};sr.prototype;function vi(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var r=t.default;if(typeof r=="function"){var n=function i(){return this instanceof i?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var e=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,e.get?e:{enumerable:!0,get:function(){return t[i]}})}),n}const Cl=Object.prototype.toString;function zr(t){const r=Cl.call(t);return r.endsWith("Array]")&&!r.includes("Big")}function gi(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!zr(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=r.fromIndex,i=n===void 0?0:n,e=r.toIndex,s=e===void 0?t.length:e;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[i],o=i+1;o<s;o++)t[o]>a&&(a=t[o]);return a}function $l(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!zr(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=r.fromIndex,i=n===void 0?0:n,e=r.toIndex,s=e===void 0?t.length:e;if(i<0||i>=t.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=i||s>t.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[i],o=i+1;o<s;o++)t[o]<a&&(a=t[o]);return a}function ln(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zr(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(r.output!==void 0){if(!zr(r.output))throw new TypeError("output option must be an array if specified");n=r.output}else n=new Array(t.length);var i=$l(t),e=gi(t);if(i===e)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=r.min,a=s===void 0?r.autoMinMax?i:0:s,o=r.max,l=o===void 0?r.autoMinMax?e:1:o;if(a>=l)throw new RangeError("min option must be smaller than max option");for(var f=(l-a)/(e-i),u=0;u<t.length;u++)n[u]=(t[u]-i)*f+a;return n}class Ur{constructor(r){r=ct.checkMatrix(r);var n=r.clone(),i=n.rows,e=n.columns,s=new Array(i),a=1,o,l,f,u,h,m,y,d,_;for(o=0;o<i;o++)s[o]=o;for(d=new Array(i),l=0;l<e;l++){for(o=0;o<i;o++)d[o]=n.get(o,l);for(o=0;o<i;o++){for(_=Math.min(o,l),h=0,f=0;f<_;f++)h+=n.get(o,f)*d[f];d[o]-=h,n.set(o,l,d[o])}for(u=l,o=l+1;o<i;o++)Math.abs(d[o])>Math.abs(d[u])&&(u=o);if(u!==l){for(f=0;f<e;f++)m=n.get(u,f),n.set(u,f,n.get(l,f)),n.set(l,f,m);y=s[u],s[u]=s[l],s[l]=y,a=-a}if(l<i&&n.get(l,l)!==0)for(o=l+1;o<i;o++)n.set(o,l,n.get(o,l)/n.get(l,l))}this.LU=n,this.pivotVector=s,this.pivotSign=a}isSingular(){for(var r=this.LU,n=r.columns,i=0;i<n;i++)if(r[i][i]===0)return!0;return!1}solve(r){r=C.checkMatrix(r);var n=this.LU,i=n.rows;if(i!==r.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var e=r.columns,s=r.subMatrixRow(this.pivotVector,0,e-1),a=n.columns,o,l,f;for(f=0;f<a;f++)for(o=f+1;o<a;o++)for(l=0;l<e;l++)s[o][l]-=s[f][l]*n[o][f];for(f=a-1;f>=0;f--){for(l=0;l<e;l++)s[f][l]/=n[f][f];for(o=0;o<f;o++)for(l=0;l<e;l++)s[o][l]-=s[f][l]*n[o][f]}return s}get determinant(){var r=this.LU;if(!r.isSquare())throw new Error("Matrix must be square");for(var n=this.pivotSign,i=r.columns,e=0;e<i;e++)n*=r[e][e];return n}get lowerTriangularMatrix(){for(var r=this.LU,n=r.rows,i=r.columns,e=new C(n,i),s=0;s<n;s++)for(var a=0;a<i;a++)s>a?e[s][a]=r[s][a]:s===a?e[s][a]=1:e[s][a]=0;return e}get upperTriangularMatrix(){for(var r=this.LU,n=r.rows,i=r.columns,e=new C(n,i),s=0;s<n;s++)for(var a=0;a<i;a++)s<=a?e[s][a]=r[s][a]:e[s][a]=0;return e}get pivotPermutationVector(){return this.pivotVector.slice()}}function Et(t,r){var n=0;return Math.abs(t)>Math.abs(r)?(n=r/t,Math.abs(t)*Math.sqrt(1+n*n)):r!==0?(n=t/r,Math.abs(r)*Math.sqrt(1+n*n)):0}function Yr(t,r,n){for(var i=new Array(t),e=0;e<t;e++){i[e]=new Array(r);for(var s=0;s<r;s++)i[e][s]=n}return i}class Qt{constructor(r,n={}){r=ct.checkMatrix(r);var i=r.rows,e=r.columns;const{computeLeftSingularVectors:s=!0,computeRightSingularVectors:a=!0,autoTranspose:o=!1}=n;var l=!!s,f=!!a,u=!1,h;if(i<e)if(!o)h=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{h=r.transpose(),i=h.rows,e=h.columns,u=!0;var m=l;l=f,f=m}else h=r.clone();var y=Math.min(i,e),d=Math.min(i+1,e),_=new Array(d),E=Yr(i,y,0),p=Yr(e,e,0),b=new Array(e),q=new Array(i),O=new Array(d);for(let w=0;w<d;w++)O[w]=w;var T=Math.min(i-1,e),$=Math.max(0,Math.min(e-2,i)),F=Math.max(T,$);for(let w=0;w<F;w++){if(w<T){_[w]=0;for(let k=w;k<i;k++)_[w]=Et(_[w],h[k][w]);if(_[w]!==0){h[w][w]<0&&(_[w]=-_[w]);for(let k=w;k<i;k++)h[k][w]/=_[w];h[w][w]+=1}_[w]=-_[w]}for(let k=w+1;k<e;k++){if(w<T&&_[w]!==0){let I=0;for(let S=w;S<i;S++)I+=h[S][w]*h[S][k];I=-I/h[w][w];for(let S=w;S<i;S++)h[S][k]+=I*h[S][w]}b[k]=h[w][k]}if(l&&w<T)for(let k=w;k<i;k++)E[k][w]=h[k][w];if(w<$){b[w]=0;for(let k=w+1;k<e;k++)b[w]=Et(b[w],b[k]);if(b[w]!==0){b[w+1]<0&&(b[w]=0-b[w]);for(let k=w+1;k<e;k++)b[k]/=b[w];b[w+1]+=1}if(b[w]=-b[w],w+1<i&&b[w]!==0){for(let k=w+1;k<i;k++)q[k]=0;for(let k=w+1;k<i;k++)for(let I=w+1;I<e;I++)q[k]+=b[I]*h[k][I];for(let k=w+1;k<e;k++){let I=-b[k]/b[w+1];for(let S=w+1;S<i;S++)h[S][k]+=I*q[S]}}if(f)for(let k=w+1;k<e;k++)p[k][w]=b[k]}}let R=Math.min(e,i+1);if(T<e&&(_[T]=h[T][T]),i<R&&(_[R-1]=0),$+1<R&&(b[$]=h[$][R-1]),b[R-1]=0,l){for(let w=T;w<y;w++){for(let k=0;k<i;k++)E[k][w]=0;E[w][w]=1}for(let w=T-1;w>=0;w--)if(_[w]!==0){for(let k=w+1;k<y;k++){let I=0;for(let S=w;S<i;S++)I+=E[S][w]*E[S][k];I=-I/E[w][w];for(let S=w;S<i;S++)E[S][k]+=I*E[S][w]}for(let k=w;k<i;k++)E[k][w]=-E[k][w];E[w][w]=1+E[w][w];for(let k=0;k<w-1;k++)E[k][w]=0}else{for(let k=0;k<i;k++)E[k][w]=0;E[w][w]=1}}if(f)for(let w=e-1;w>=0;w--){if(w<$&&b[w]!==0)for(let k=w+1;k<e;k++){let I=0;for(let S=w+1;S<e;S++)I+=p[S][w]*p[S][k];I=-I/p[w+1][w];for(let S=w+1;S<e;S++)p[S][k]+=I*p[S][w]}for(let k=0;k<e;k++)p[k][w]=0;p[w][w]=1}for(var V=R-1,G=Number.EPSILON;R>0;){let w,k;for(w=R-2;w>=-1&&w!==-1;w--){const I=Number.MIN_VALUE+G*Math.abs(_[w]+Math.abs(_[w+1]));if(Math.abs(b[w])<=I||Number.isNaN(b[w])){b[w]=0;break}}if(w===R-2)k=4;else{let I;for(I=R-1;I>=w&&I!==w;I--){let S=(I!==R?Math.abs(b[I]):0)+(I!==w+1?Math.abs(b[I-1]):0);if(Math.abs(_[I])<=G*S){_[I]=0;break}}I===w?k=3:I===R-1?k=1:(k=2,w=I)}switch(w++,k){case 1:{let I=b[R-2];b[R-2]=0;for(let S=R-2;S>=w;S--){let Q=Et(_[S],I),H=_[S]/Q,nt=I/Q;if(_[S]=Q,S!==w&&(I=-nt*b[S-1],b[S-1]=H*b[S-1]),f)for(let B=0;B<e;B++)Q=H*p[B][S]+nt*p[B][R-1],p[B][R-1]=-nt*p[B][S]+H*p[B][R-1],p[B][S]=Q}break}case 2:{let I=b[w-1];b[w-1]=0;for(let S=w;S<R;S++){let Q=Et(_[S],I),H=_[S]/Q,nt=I/Q;if(_[S]=Q,I=-nt*b[S],b[S]=H*b[S],l)for(let B=0;B<i;B++)Q=H*E[B][S]+nt*E[B][w-1],E[B][w-1]=-nt*E[B][S]+H*E[B][w-1],E[B][S]=Q}break}case 3:{const I=Math.max(Math.abs(_[R-1]),Math.abs(_[R-2]),Math.abs(b[R-2]),Math.abs(_[w]),Math.abs(b[w])),S=_[R-1]/I,Q=_[R-2]/I,H=b[R-2]/I,nt=_[w]/I,B=b[w]/I,_t=((Q+S)*(Q-S)+H*H)/2,Z=S*H*(S*H);let j=0;(_t!==0||Z!==0)&&(_t<0?j=0-Math.sqrt(_t*_t+Z):j=Math.sqrt(_t*_t+Z),j=Z/(_t+j));let c=(nt+S)*(nt-S)+j,g=nt*B;for(let v=w;v<R-1;v++){let M=Et(c,g);M===0&&(M=Number.MIN_VALUE);let x=c/M,A=g/M;if(v!==w&&(b[v-1]=M),c=x*_[v]+A*b[v],b[v]=x*b[v]-A*_[v],g=A*_[v+1],_[v+1]=x*_[v+1],f)for(let N=0;N<e;N++)M=x*p[N][v]+A*p[N][v+1],p[N][v+1]=-A*p[N][v]+x*p[N][v+1],p[N][v]=M;if(M=Et(c,g),M===0&&(M=Number.MIN_VALUE),x=c/M,A=g/M,_[v]=M,c=x*b[v]+A*_[v+1],_[v+1]=-A*b[v]+x*_[v+1],g=A*b[v+1],b[v+1]=x*b[v+1],l&&v<i-1)for(let N=0;N<i;N++)M=x*E[N][v]+A*E[N][v+1],E[N][v+1]=-A*E[N][v]+x*E[N][v+1],E[N][v]=M}b[R-2]=c;break}case 4:{if(_[w]<=0&&(_[w]=_[w]<0?-_[w]:0,f))for(let I=0;I<=V;I++)p[I][w]=-p[I][w];for(;w<V&&!(_[w]>=_[w+1]);){let I=_[w];if(_[w]=_[w+1],_[w+1]=I,f&&w<e-1)for(let S=0;S<e;S++)I=p[S][w+1],p[S][w+1]=p[S][w],p[S][w]=I;if(l&&w<i-1)for(let S=0;S<i;S++)I=E[S][w+1],E[S][w+1]=E[S][w],E[S][w]=I;w++}R--;break}}}if(u){var J=p;p=E,E=J}this.m=i,this.n=e,this.s=_,this.U=E,this.V=p}solve(r){var n=r,i=this.threshold,e=this.s.length,s=C.zeros(e,e);for(let m=0;m<e;m++)Math.abs(this.s[m])<=i?s[m][m]=0:s[m][m]=1/this.s[m];var a=this.U,o=this.rightSingularVectors,l=o.mmul(s),f=o.rows,u=a.length,h=C.zeros(f,u);for(let m=0;m<f;m++)for(let y=0;y<u;y++){let d=0;for(let _=0;_<e;_++)d+=l[m][_]*a[y][_];h[m][y]=d}return h.mmul(n)}solveForDiagonal(r){return this.solve(C.diag(r))}inverse(){var r=this.V,n=this.threshold,i=r.length,e=r[0].length,s=new C(i,this.s.length);for(let u=0;u<i;u++)for(let h=0;h<e;h++)Math.abs(this.s[h])>n?s[u][h]=r[u][h]/this.s[h]:s[u][h]=0;var a=this.U,o=a.length,l=a[0].length,f=new C(i,o);for(let u=0;u<i;u++)for(let h=0;h<o;h++){let m=0;for(let y=0;y<l;y++)m+=s[u][y]*a[h][y];f[u][h]=m}return f}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){for(var r=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,n=0,i=this.s,e=0,s=i.length;e<s;e++)i[e]>r&&n++;return n}get diagonal(){return this.s}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return C.isMatrix(this.U)||(this.U=new C(this.U)),this.U}get rightSingularVectors(){return C.isMatrix(this.V)||(this.V=new C(this.V)),this.V}get diagonalMatrix(){return C.diag(this.s)}}function at(t,r,n){var i=n?t.rows:t.rows-1;if(r<0||r>i)throw new RangeError("Row index out of range")}function ot(t,r,n){var i=n?t.columns:t.columns-1;if(r<0||r>i)throw new RangeError("Column index out of range")}function Pt(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function Xt(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function mi(t,r,n){return{row:pi(t,r),column:wi(t,n)}}function pi(t,r){if(typeof r!="object")throw new TypeError("unexpected type for row indices");var n=r.some(i=>i<0||i>=t.rows);if(n)throw new RangeError("row indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function wi(t,r){if(typeof r!="object")throw new TypeError("unexpected type for column indices");var n=r.some(i=>i<0||i>=t.columns);if(n)throw new RangeError("column indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function ke(t,r,n,i,e){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Er("startRow",r),Er("endRow",n),Er("startColumn",i),Er("endColumn",e),r>n||i>e||r<0||r>=t.rows||n<0||n>=t.rows||i<0||i>=t.columns||e<0||e>=t.columns)throw new RangeError("Submatrix indices are out of range")}function Vl(t){for(var r=C.zeros(t.rows,1),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)r.set(n,0,r.get(n,0)+t.get(n,i));return r}function Dl(t){for(var r=C.zeros(1,t.columns),n=0;n<t.rows;++n)for(var i=0;i<t.columns;++i)r.set(0,i,r.get(0,i)+t.get(n,i));return r}function Ll(t){for(var r=0,n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)r+=t.get(n,i);return r}function Er(t,r){if(typeof r!="number")throw new TypeError(`${t} must be a number`)}class kt extends wr(){constructor(r,n,i){super(),this.matrix=r,this.rows=n,this.columns=i}static get[Symbol.species](){return C}}class Fl extends kt{constructor(r){super(r,r.columns,r.rows)}set(r,n,i){return this.matrix.set(n,r,i),this}get(r,n){return this.matrix.get(n,r)}}class Kl extends kt{constructor(r,n){super(r,1,r.columns),this.row=n}set(r,n,i){return this.matrix.set(this.row,n,i),this}get(r,n){return this.matrix.get(this.row,n)}}class Pl extends kt{constructor(r,n,i,e,s){ke(r,n,i,e,s),super(r,i-n+1,s-e+1),this.startRow=n,this.startColumn=e}set(r,n,i){return this.matrix.set(this.startRow+r,this.startColumn+n,i),this}get(r,n){return this.matrix.get(this.startRow+r,this.startColumn+n)}}class Xl extends kt{constructor(r,n,i){var e=mi(r,n,i);super(r,e.row.length,e.column.length),this.rowIndices=e.row,this.columnIndices=e.column}set(r,n,i){return this.matrix.set(this.rowIndices[r],this.columnIndices[n],i),this}get(r,n){return this.matrix.get(this.rowIndices[r],this.columnIndices[n])}}class zl extends kt{constructor(r,n){n=pi(r,n),super(r,n.length,r.columns),this.rowIndices=n}set(r,n,i){return this.matrix.set(this.rowIndices[r],n,i),this}get(r,n){return this.matrix.get(this.rowIndices[r],n)}}class Ul extends kt{constructor(r,n){n=wi(r,n),super(r,r.rows,n.length),this.columnIndices=n}set(r,n,i){return this.matrix.set(r,this.columnIndices[n],i),this}get(r,n){return this.matrix.get(r,this.columnIndices[n])}}class Yl extends kt{constructor(r,n){super(r,r.rows,1),this.column=n}set(r,n,i){return this.matrix.set(r,this.column,i),this}get(r){return this.matrix.get(r,this.column)}}class Bl extends kt{constructor(r){super(r,r.rows,r.columns)}set(r,n,i){return this.matrix.set(this.rows-r-1,n,i),this}get(r,n){return this.matrix.get(this.rows-r-1,n)}}class Wl extends kt{constructor(r){super(r,r.rows,r.columns)}set(r,n,i){return this.matrix.set(r,this.columns-n-1,i),this}get(r,n){return this.matrix.get(r,this.columns-n-1)}}function wr(t){t===void 0&&(t=Object);class r extends t{static get[Symbol.species](){return this}static from1DArray(c,g,v){var M=c*g;if(M!==v.length)throw new RangeError("Data length does not match given dimensions");for(var x=new this(c,g),A=0;A<c;A++)for(var N=0;N<g;N++)x.set(A,N,v[A*g+N]);return x}static rowVector(c){for(var g=new this(1,c.length),v=0;v<c.length;v++)g.set(0,v,c[v]);return g}static columnVector(c){for(var g=new this(c.length,1),v=0;v<c.length;v++)g.set(v,0,c[v]);return g}static empty(c,g){return new this(c,g)}static zeros(c,g){return this.empty(c,g).fill(0)}static ones(c,g){return this.empty(c,g).fill(1)}static rand(c,g,v){v===void 0&&(v=Math.random);for(var M=this.empty(c,g),x=0;x<c;x++)for(var A=0;A<g;A++)M.set(x,A,v());return M}static randInt(c,g,v,M){v===void 0&&(v=1e3),M===void 0&&(M=Math.random);for(var x=this.empty(c,g),A=0;A<c;A++)for(var N=0;N<g;N++){var D=Math.floor(M()*v);x.set(A,N,D)}return x}static eye(c,g,v){g===void 0&&(g=c),v===void 0&&(v=1);for(var M=Math.min(c,g),x=this.zeros(c,g),A=0;A<M;A++)x.set(A,A,v);return x}static diag(c,g,v){var M=c.length;g===void 0&&(g=M),v===void 0&&(v=g);for(var x=Math.min(M,g,v),A=this.zeros(g,v),N=0;N<x;N++)A.set(N,N,c[N]);return A}static min(c,g){c=this.checkMatrix(c),g=this.checkMatrix(g);for(var v=c.rows,M=c.columns,x=new this(v,M),A=0;A<v;A++)for(var N=0;N<M;N++)x.set(A,N,Math.min(c.get(A,N),g.get(A,N)));return x}static max(c,g){c=this.checkMatrix(c),g=this.checkMatrix(g);for(var v=c.rows,M=c.columns,x=new this(v,M),A=0;A<v;A++)for(var N=0;N<M;N++)x.set(A,N,Math.max(c.get(A,N),g.get(A,N)));return x}static checkMatrix(c){return r.isMatrix(c)?c:new this(c)}static isMatrix(c){return c!=null&&c.klass==="Matrix"}get size(){return this.rows*this.columns}apply(c){if(typeof c!="function")throw new TypeError("callback must be a function");for(var g=this.rows,v=this.columns,M=0;M<g;M++)for(var x=0;x<v;x++)c.call(this,M,x);return this}to1DArray(){for(var c=new Array(this.size),g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)c[g*this.columns+v]=this.get(g,v);return c}to2DArray(){for(var c=new Array(this.rows),g=0;g<this.rows;g++){c[g]=new Array(this.columns);for(var v=0;v<this.columns;v++)c[g][v]=this.get(g,v)}return c}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var c=0;c<this.rows;c++)for(var g=0;g<=c;g++)if(this.get(c,g)!==this.get(g,c))return!1;return!0}return!1}isEchelonForm(){let c=0,g=0,v=-1,M=!0,x=!1;for(;c<this.rows&&M;){for(g=0,x=!1;g<this.columns&&x===!1;)this.get(c,g)===0?g++:this.get(c,g)===1&&g>v?(x=!0,v=g):(M=!1,x=!0);c++}return M}isReducedEchelonForm(){let c=0,g=0,v=-1,M=!0,x=!1;for(;c<this.rows&&M;){for(g=0,x=!1;g<this.columns&&x===!1;)this.get(c,g)===0?g++:this.get(c,g)===1&&g>v?(x=!0,v=g):(M=!1,x=!0);for(let A=g+1;A<this.rows;A++)this.get(c,A)!==0&&(M=!1);c++}return M}set(c,g,v){throw new Error("set method is unimplemented")}get(c,g){throw new Error("get method is unimplemented")}repeat(c,g){c=c||1,g=g||1;for(var v=new this.constructor[Symbol.species](this.rows*c,this.columns*g),M=0;M<c;M++)for(var x=0;x<g;x++)v.setSubMatrix(this,this.rows*M,this.columns*x);return v}fill(c){for(var g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.set(g,v,c);return this}neg(){return this.mulS(-1)}getRow(c){at(this,c);for(var g=new Array(this.columns),v=0;v<this.columns;v++)g[v]=this.get(c,v);return g}getRowVector(c){return this.constructor.rowVector(this.getRow(c))}setRow(c,g){at(this,c),g=Pt(this,g);for(var v=0;v<this.columns;v++)this.set(c,v,g[v]);return this}swapRows(c,g){at(this,c),at(this,g);for(var v=0;v<this.columns;v++){var M=this.get(c,v);this.set(c,v,this.get(g,v)),this.set(g,v,M)}return this}getColumn(c){ot(this,c);for(var g=new Array(this.rows),v=0;v<this.rows;v++)g[v]=this.get(v,c);return g}getColumnVector(c){return this.constructor.columnVector(this.getColumn(c))}setColumn(c,g){ot(this,c),g=Xt(this,g);for(var v=0;v<this.rows;v++)this.set(v,c,g[v]);return this}swapColumns(c,g){ot(this,c),ot(this,g);for(var v=0;v<this.rows;v++){var M=this.get(v,c);this.set(v,c,this.get(v,g)),this.set(v,g,M)}return this}addRowVector(c){c=Pt(this,c);for(var g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.set(g,v,this.get(g,v)+c[v]);return this}subRowVector(c){c=Pt(this,c);for(var g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.set(g,v,this.get(g,v)-c[v]);return this}mulRowVector(c){c=Pt(this,c);for(var g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.set(g,v,this.get(g,v)*c[v]);return this}divRowVector(c){c=Pt(this,c);for(var g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.set(g,v,this.get(g,v)/c[v]);return this}addColumnVector(c){c=Xt(this,c);for(var g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.set(g,v,this.get(g,v)+c[g]);return this}subColumnVector(c){c=Xt(this,c);for(var g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.set(g,v,this.get(g,v)-c[g]);return this}mulColumnVector(c){c=Xt(this,c);for(var g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.set(g,v,this.get(g,v)*c[g]);return this}divColumnVector(c){c=Xt(this,c);for(var g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.set(g,v,this.get(g,v)/c[g]);return this}mulRow(c,g){at(this,c);for(var v=0;v<this.columns;v++)this.set(c,v,this.get(c,v)*g);return this}mulColumn(c,g){ot(this,c);for(var v=0;v<this.rows;v++)this.set(v,c,this.get(v,c)*g);return this}max(){for(var c=this.get(0,0),g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.get(g,v)>c&&(c=this.get(g,v));return c}maxIndex(){for(var c=this.get(0,0),g=[0,0],v=0;v<this.rows;v++)for(var M=0;M<this.columns;M++)this.get(v,M)>c&&(c=this.get(v,M),g[0]=v,g[1]=M);return g}min(){for(var c=this.get(0,0),g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)this.get(g,v)<c&&(c=this.get(g,v));return c}minIndex(){for(var c=this.get(0,0),g=[0,0],v=0;v<this.rows;v++)for(var M=0;M<this.columns;M++)this.get(v,M)<c&&(c=this.get(v,M),g[0]=v,g[1]=M);return g}maxRow(c){at(this,c);for(var g=this.get(c,0),v=1;v<this.columns;v++)this.get(c,v)>g&&(g=this.get(c,v));return g}maxRowIndex(c){at(this,c);for(var g=this.get(c,0),v=[c,0],M=1;M<this.columns;M++)this.get(c,M)>g&&(g=this.get(c,M),v[1]=M);return v}minRow(c){at(this,c);for(var g=this.get(c,0),v=1;v<this.columns;v++)this.get(c,v)<g&&(g=this.get(c,v));return g}minRowIndex(c){at(this,c);for(var g=this.get(c,0),v=[c,0],M=1;M<this.columns;M++)this.get(c,M)<g&&(g=this.get(c,M),v[1]=M);return v}maxColumn(c){ot(this,c);for(var g=this.get(0,c),v=1;v<this.rows;v++)this.get(v,c)>g&&(g=this.get(v,c));return g}maxColumnIndex(c){ot(this,c);for(var g=this.get(0,c),v=[0,c],M=1;M<this.rows;M++)this.get(M,c)>g&&(g=this.get(M,c),v[0]=M);return v}minColumn(c){ot(this,c);for(var g=this.get(0,c),v=1;v<this.rows;v++)this.get(v,c)<g&&(g=this.get(v,c));return g}minColumnIndex(c){ot(this,c);for(var g=this.get(0,c),v=[0,c],M=1;M<this.rows;M++)this.get(M,c)<g&&(g=this.get(M,c),v[0]=M);return v}diag(){for(var c=Math.min(this.rows,this.columns),g=new Array(c),v=0;v<c;v++)g[v]=this.get(v,v);return g}sum(c){switch(c){case"row":return Vl(this);case"column":return Dl(this);default:return Ll(this)}}mean(){return this.sum()/this.size}prod(){for(var c=1,g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)c*=this.get(g,v);return c}norm(c="frobenius"){var g=0;if(c==="max")return this.max();if(c==="frobenius"){for(var v=0;v<this.rows;v++)for(var M=0;M<this.columns;M++)g=g+this.get(v,M)*this.get(v,M);return Math.sqrt(g)}else throw new RangeError(`unknown norm type: ${c}`)}cumulativeSum(){for(var c=0,g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)c+=this.get(g,v),this.set(g,v,c);return this}dot(c){r.isMatrix(c)&&(c=c.to1DArray());var g=this.to1DArray();if(g.length!==c.length)throw new RangeError("vectors do not have the same size");for(var v=0,M=0;M<g.length;M++)v+=g[M]*c[M];return v}mmul(c){c=this.constructor.checkMatrix(c),this.columns!==c.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var g=this.rows,v=this.columns,M=c.columns,x=new this.constructor[Symbol.species](g,M),A=new Array(v),N=0;N<M;N++){for(var D=0;D<v;D++)A[D]=c.get(D,N);for(var z=0;z<g;z++){var K=0;for(D=0;D<v;D++)K+=this.get(z,D)*A[D];x.set(z,N,K)}}return x}strassen2x2(c){var g=new this.constructor[Symbol.species](2,2);const v=this.get(0,0),M=c.get(0,0),x=this.get(0,1),A=c.get(0,1),N=this.get(1,0),D=c.get(1,0),z=this.get(1,1),K=c.get(1,1),L=(v+z)*(M+K),P=(N+z)*M,Y=v*(A-K),W=z*(D-M),U=(v+x)*K,X=(N-v)*(M+A),tt=(x-z)*(D+K),rt=L+W-U+tt,gt=Y+U,mt=P+W,Dt=L-P+Y+X;return g.set(0,0,rt),g.set(0,1,gt),g.set(1,0,mt),g.set(1,1,Dt),g}strassen3x3(c){var g=new this.constructor[Symbol.species](3,3);const v=this.get(0,0),M=this.get(0,1),x=this.get(0,2),A=this.get(1,0),N=this.get(1,1),D=this.get(1,2),z=this.get(2,0),K=this.get(2,1),L=this.get(2,2),P=c.get(0,0),Y=c.get(0,1),W=c.get(0,2),U=c.get(1,0),X=c.get(1,1),tt=c.get(1,2),rt=c.get(2,0),gt=c.get(2,1),mt=c.get(2,2),Dt=(v+M+x-A-N-K-L)*X,Jt=(v-A)*(-Y+X),Lt=N*(-P+Y+U-X-tt-rt+mt),Nt=(-v+A+N)*(P-Y+X),Zt=(A+N)*(-P+Y),pt=v*P,Ft=(-v+z+K)*(P-W+tt),Ht=(-v+z)*(W-tt),jt=(z+K)*(-P+W),Hr=(v+M+x-N-D-z-K)*tt,jr=K*(-P+W+U-X-tt-rt+gt),it=(-x+K+L)*(X+rt-gt),yr=(x-L)*(X-gt),bt=x*rt,Kt=(K+L)*(-rt+gt),st=(-x+N+D)*(tt+rt-mt),De=(x-D)*(tt-mt),Le=(N+D)*(-rt+mt),Mi=M*U,xi=D*gt,Ei=A*W,Ai=z*Y,Si=L*mt,ki=pt+bt+Mi,Ni=Dt+Nt+Zt+pt+it+bt+Kt,qi=pt+Ft+jt+Hr+bt+st+Le,Ri=Jt+Lt+Nt+pt+bt+st+De,Ii=Jt+Nt+Zt+pt+xi,Ti=bt+st+De+Le+Ei,Oi=pt+Ft+Ht+jr+it+yr+bt,Ci=it+yr+bt+Kt+Ai,$i=pt+Ft+Ht+jt+Si;return g.set(0,0,ki),g.set(0,1,Ni),g.set(0,2,qi),g.set(1,0,Ri),g.set(1,1,Ii),g.set(1,2,Ti),g.set(2,0,Oi),g.set(2,1,Ci),g.set(2,2,$i),g}mmulStrassen(c){var g=this.clone(),v=g.rows,M=g.columns,x=c.rows,A=c.columns;M!==x&&console.warn(`Multiplying ${v} x ${M} and ${x} x ${A} matrix: dimensions do not match.`);function N(L,P,Y){var W=L.rows,U=L.columns;if(W===P&&U===Y)return L;var X=r.zeros(P,Y);return X=X.setSubMatrix(L,0,0),X}var D=Math.max(v,x),z=Math.max(M,A);g=N(g,D,z),c=N(c,D,z);function K(L,P,Y,W){if(Y<=512||W<=512)return L.mmul(P);Y%2===1&&W%2===1?(L=N(L,Y+1,W+1),P=N(P,Y+1,W+1)):Y%2===1?(L=N(L,Y+1,W),P=N(P,Y+1,W)):W%2===1&&(L=N(L,Y,W+1),P=N(P,Y,W+1));var U=parseInt(L.rows/2,10),X=parseInt(L.columns/2,10),tt=L.subMatrix(0,U-1,0,X-1),rt=P.subMatrix(0,U-1,0,X-1),gt=L.subMatrix(0,U-1,X,L.columns-1),mt=P.subMatrix(0,U-1,X,P.columns-1),Dt=L.subMatrix(U,L.rows-1,0,X-1),Jt=P.subMatrix(U,P.rows-1,0,X-1),Lt=L.subMatrix(U,L.rows-1,X,L.columns-1),Nt=P.subMatrix(U,P.rows-1,X,P.columns-1),Zt=K(r.add(tt,Lt),r.add(rt,Nt),U,X),pt=K(r.add(Dt,Lt),rt,U,X),Ft=K(tt,r.sub(mt,Nt),U,X),Ht=K(Lt,r.sub(Jt,rt),U,X),jt=K(r.add(tt,gt),Nt,U,X),Hr=K(r.sub(Dt,tt),r.add(rt,mt),U,X),jr=K(r.sub(gt,Lt),r.add(Jt,Nt),U,X),it=r.add(Zt,Ht);it.sub(jt),it.add(jr);var yr=r.add(Ft,jt),bt=r.add(pt,Ht),Kt=r.sub(Zt,pt);Kt.add(Ft),Kt.add(Hr);var st=r.zeros(2*it.rows,2*it.columns);return st=st.setSubMatrix(it,0,0),st=st.setSubMatrix(yr,it.rows,0),st=st.setSubMatrix(bt,0,it.columns),st=st.setSubMatrix(Kt,it.rows,it.columns),st.subMatrix(0,Y-1,0,W-1)}return K(g,c,D,z)}scaleRows(c,g){if(c=c===void 0?0:c,g=g===void 0?1:g,c>=g)throw new RangeError("min should be strictly smaller than max");for(var v=this.constructor.empty(this.rows,this.columns),M=0;M<this.rows;M++){var x=ln(this.getRow(M),{min:c,max:g});v.setRow(M,x)}return v}scaleColumns(c,g){if(c=c===void 0?0:c,g=g===void 0?1:g,c>=g)throw new RangeError("min should be strictly smaller than max");for(var v=this.constructor.empty(this.rows,this.columns),M=0;M<this.columns;M++){var x=ln(this.getColumn(M),{min:c,max:g});v.setColumn(M,x)}return v}kroneckerProduct(c){c=this.constructor.checkMatrix(c);for(var g=this.rows,v=this.columns,M=c.rows,x=c.columns,A=new this.constructor[Symbol.species](g*M,v*x),N=0;N<g;N++)for(var D=0;D<v;D++)for(var z=0;z<M;z++)for(var K=0;K<x;K++)A[M*N+z][x*D+K]=this.get(N,D)*c.get(z,K);return A}transpose(){for(var c=new this.constructor[Symbol.species](this.columns,this.rows),g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)c.set(v,g,this.get(g,v));return c}sortRows(c){c===void 0&&(c=n);for(var g=0;g<this.rows;g++)this.setRow(g,this.getRow(g).sort(c));return this}sortColumns(c){c===void 0&&(c=n);for(var g=0;g<this.columns;g++)this.setColumn(g,this.getColumn(g).sort(c));return this}subMatrix(c,g,v,M){ke(this,c,g,v,M);for(var x=new this.constructor[Symbol.species](g-c+1,M-v+1),A=c;A<=g;A++)for(var N=v;N<=M;N++)x[A-c][N-v]=this.get(A,N);return x}subMatrixRow(c,g,v){if(g===void 0&&(g=0),v===void 0&&(v=this.columns-1),g>v||g<0||g>=this.columns||v<0||v>=this.columns)throw new RangeError("Argument out of range");for(var M=new this.constructor[Symbol.species](c.length,v-g+1),x=0;x<c.length;x++)for(var A=g;A<=v;A++){if(c[x]<0||c[x]>=this.rows)throw new RangeError(`Row index out of range: ${c[x]}`);M.set(x,A-g,this.get(c[x],A))}return M}subMatrixColumn(c,g,v){if(g===void 0&&(g=0),v===void 0&&(v=this.rows-1),g>v||g<0||g>=this.rows||v<0||v>=this.rows)throw new RangeError("Argument out of range");for(var M=new this.constructor[Symbol.species](v-g+1,c.length),x=0;x<c.length;x++)for(var A=g;A<=v;A++){if(c[x]<0||c[x]>=this.columns)throw new RangeError(`Column index out of range: ${c[x]}`);M.set(A-g,x,this.get(A,c[x]))}return M}setSubMatrix(c,g,v){c=this.constructor.checkMatrix(c);var M=g+c.rows-1,x=v+c.columns-1;ke(this,g,M,v,x);for(var A=0;A<c.rows;A++)for(var N=0;N<c.columns;N++)this[g+A][v+N]=c.get(A,N);return this}selection(c,g){for(var v=mi(this,c,g),M=new this.constructor[Symbol.species](c.length,g.length),x=0;x<v.row.length;x++)for(var A=v.row[x],N=0;N<v.column.length;N++){var D=v.column[N];M[x][N]=this.get(A,D)}return M}trace(){for(var c=Math.min(this.rows,this.columns),g=0,v=0;v<c;v++)g+=this.get(v,v);return g}transposeView(){return new Fl(this)}rowView(c){return at(this,c),new Kl(this,c)}columnView(c){return ot(this,c),new Yl(this,c)}flipRowView(){return new Bl(this)}flipColumnView(){return new Wl(this)}subMatrixView(c,g,v,M){return new Pl(this,c,g,v,M)}selectionView(c,g){return new Xl(this,c,g)}rowSelectionView(c){return new zl(this,c)}columnSelectionView(c){return new Ul(this,c)}det(){if(this.isSquare()){var c,g,v,M;if(this.columns===2)return c=this.get(0,0),g=this.get(0,1),v=this.get(1,0),M=this.get(1,1),c*M-g*v;if(this.columns===3){var x,A,N;return x=this.selectionView([1,2],[1,2]),A=this.selectionView([1,2],[0,2]),N=this.selectionView([1,2],[0,1]),c=this.get(0,0),g=this.get(0,1),v=this.get(0,2),c*x.det()-g*A.det()+v*N.det()}else return new Ur(this).determinant}else throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(c){c===void 0&&(c=Number.EPSILON);for(var g=new Qt(this,{autoTranspose:!0}),v=g.leftSingularVectors,M=g.rightSingularVectors,x=g.diagonal,A=0;A<x.length;A++)Math.abs(x[A])>c?x[A]=1/x[A]:x[A]=0;return x=this.constructor[Symbol.species].diag(x),M.mmul(x.mmul(v.transposeView()))}clone(){for(var c=new this.constructor[Symbol.species](this.rows,this.columns),g=0;g<this.rows;g++)for(var v=0;v<this.columns;v++)c.set(g,v,this.get(g,v));return c}}r.prototype.klass="Matrix";function n(j,c){return j-c}r.random=r.rand,r.diagonal=r.diag,r.prototype.diagonal=r.prototype.diag,r.identity=r.eye,r.prototype.negate=r.prototype.neg,r.prototype.tensorProduct=r.prototype.kroneckerProduct,r.prototype.determinant=r.prototype.det;var i=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,e=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% value);
        }
    }
    return this;
})
`,s=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    if (this.rows !== matrix.rows ||
        this.columns !== matrix.columns) {
        throw new RangeError('Matrices dimensions must be equal');
    }
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));
        }
    }
    return this;
})
`,a=`
(function %name%(matrix, value) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(value);
})
`,o=`
(function %name%() {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j)));
        }
    }
    return this;
})
`,l=`
(function %name%(matrix) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%();
})
`,f=`
(function %name%(%args%) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), %args%));
        }
    }
    return this;
})
`,u=`
(function %name%(matrix, %args%) {
    var newMatrix = new this[Symbol.species](matrix);
    return newMatrix.%name%(%args%);
})
`,h=`
(function %name%S(value) {
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), value));
        }
    }
    return this;
})
`,m=`
(function %name%M(matrix) {
    matrix = this.constructor.checkMatrix(matrix);
    if (this.rows !== matrix.rows ||
        this.columns !== matrix.columns) {
        throw new RangeError('Matrices dimensions must be equal');
    }
    for (var i = 0; i < this.rows; i++) {
        for (var j = 0; j < this.columns; j++) {
            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));
        }
    }
    return this;
})
`,y=`
(function %name%(value) {
    if (typeof value === 'number') return this.%name%S(value);
    return this.%name%M(value);
})
`,d=u,_=[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]],E,p=eval;for(var b of _){var q=p(Z(i,{name:b[1],op:b[0]})),O=p(Z(e,{name:`${b[1]}S`,op:b[0]})),T=p(Z(s,{name:`${b[1]}M`,op:b[0]})),$=p(Z(a,{name:b[1]}));for(E=1;E<b.length;E++)r.prototype[b[E]]=q,r.prototype[`${b[E]}S`]=O,r.prototype[`${b[E]}M`]=T,r[b[E]]=$}var F=[["~","not"]];["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(j){F.push([`Math.${j}`,j])});for(var R of F){var V=p(Z(o,{name:R[1],method:R[0]})),G=p(Z(l,{name:R[1]}));for(E=1;E<R.length;E++)r.prototype[R[E]]=V,r[R[E]]=G}var J=[["Math.pow",1,"pow"]];for(var w of J){var k="arg0";for(E=1;E<w[1];E++)k+=`, arg${E}`;if(w[1]!==1){var I=p(Z(f,{name:w[2],method:w[0],args:k})),S=p(Z(u,{name:w[2],args:k}));for(E=2;E<w.length;E++)r.prototype[w[E]]=I,r[w[E]]=S}else{var Q={name:w[2],args:k,method:w[0]},H=p(Z(y,Q)),nt=p(Z(h,Q)),B=p(Z(m,Q)),_t=p(Z(d,Q));for(E=2;E<w.length;E++)r.prototype[w[E]]=H,r.prototype[`${w[E]}M`]=B,r.prototype[`${w[E]}S`]=nt,r[w[E]]=_t}}function Z(j,c){for(var g in c)j=j.replace(new RegExp(`%${g}%`,"g"),c[g]);return j}return r}class C extends wr(Array){constructor(r,n){var i;if(arguments.length===1&&typeof r=="number")return new Array(r);if(C.isMatrix(r))return r.clone();if(Number.isInteger(r)&&r>0)if(super(r),Number.isInteger(n)&&n>0)for(i=0;i<r;i++)this[i]=new Array(n);else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(r)){const e=r;if(r=e.length,n=e[0].length,typeof n!="number"||n===0)throw new TypeError("Data must be a 2D array with at least one element");for(super(r),i=0;i<r;i++){if(e[i].length!==n)throw new RangeError("Inconsistent array dimensions");this[i]=[].concat(e[i])}}else throw new TypeError("First argument must be a positive number or an array");return this.rows=r,this.columns=n,this}set(r,n,i){return this[r][n]=i,this}get(r,n){return this[r][n]}removeRow(r){if(at(this,r),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.splice(r,1),this.rows-=1,this}addRow(r,n){return n===void 0&&(n=r,r=this.rows),at(this,r,!0),n=Pt(this,n),this.splice(r,0,n),this.rows+=1,this}removeColumn(r){if(ot(this,r),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(var n=0;n<this.rows;n++)this[n].splice(r,1);return this.columns-=1,this}addColumn(r,n){typeof n>"u"&&(n=r,r=this.columns),ot(this,r,!0),n=Xt(this,n);for(var i=0;i<this.rows;i++)this[i].splice(r,0,n[i]);return this.columns+=1,this}}class di extends wr(){constructor(r,n={}){const{rows:i=1}=n;if(r.length%i!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=i,this.columns=r.length/i,this.data=r}set(r,n,i){var e=this._calculateIndex(r,n);return this.data[e]=i,this}get(r,n){var i=this._calculateIndex(r,n);return this.data[i]}_calculateIndex(r,n){return r*this.columns+n}static get[Symbol.species](){return C}}class ct extends wr(){constructor(r){super(),this.data=r,this.rows=r.length,this.columns=r[0].length}set(r,n,i){return this.data[r][n]=i,this}get(r,n){return this.data[r][n]}static get[Symbol.species](){return C}}function Gl(t,r){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new ct(t):new di(t,r);throw new Error("the argument is not an array")}class Ne{constructor(r){r=ct.checkMatrix(r);var n=r.clone(),i=r.rows,e=r.columns,s=new Array(e),a,o,l,f;for(l=0;l<e;l++){var u=0;for(a=l;a<i;a++)u=Et(u,n.get(a,l));if(u!==0){for(n.get(l,l)<0&&(u=-u),a=l;a<i;a++)n.set(a,l,n.get(a,l)/u);for(n.set(l,l,n.get(l,l)+1),o=l+1;o<e;o++){for(f=0,a=l;a<i;a++)f+=n.get(a,l)*n.get(a,o);for(f=-f/n.get(l,l),a=l;a<i;a++)n.set(a,o,n.get(a,o)+f*n.get(a,l))}}s[l]=-u}this.QR=n,this.Rdiag=s}solve(r){r=C.checkMatrix(r);var n=this.QR,i=n.rows;if(r.rows!==i)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var e=r.columns,s=r.clone(),a=n.columns,o,l,f,u;for(f=0;f<a;f++)for(l=0;l<e;l++){for(u=0,o=f;o<i;o++)u+=n[o][f]*s[o][l];for(u=-u/n[f][f],o=f;o<i;o++)s[o][l]+=u*n[o][f]}for(f=a-1;f>=0;f--){for(l=0;l<e;l++)s[f][l]/=this.Rdiag[f];for(o=0;o<f;o++)for(l=0;l<e;l++)s[o][l]-=s[f][l]*n[o][f]}return s.subMatrix(0,a-1,0,e-1)}isFullRank(){for(var r=this.QR.columns,n=0;n<r;n++)if(this.Rdiag[n]===0)return!1;return!0}get upperTriangularMatrix(){var r=this.QR,n=r.columns,i=new C(n,n),e,s;for(e=0;e<n;e++)for(s=0;s<n;s++)e<s?i[e][s]=r[e][s]:e===s?i[e][s]=this.Rdiag[e]:i[e][s]=0;return i}get orthogonalMatrix(){var r=this.QR,n=r.rows,i=r.columns,e=new C(n,i),s,a,o,l;for(o=i-1;o>=0;o--){for(s=0;s<n;s++)e[s][o]=0;for(e[o][o]=1,a=o;a<i;a++)if(r[o][o]!==0){for(l=0,s=o;s<n;s++)l+=r[s][o]*e[s][a];for(l=-l/r[o][o],s=o;s<n;s++)e[s][a]+=l*r[s][o]}}return e}}function Ql(t,r=!1){return t=ct.checkMatrix(t),r?new Qt(t).inverse():yi(t,C.eye(t.rows))}function yi(t,r,n=!1){return t=ct.checkMatrix(t),r=ct.checkMatrix(r),n?new Qt(t).solve(r):t.isSquare()?new Ur(t).solve(r):new Ne(t).solve(r)}function Jl(t,r){for(var n=[],i=0;i<t;i++)i!==r&&n.push(i);return n}function Zl(t,r,n,i=1e-9,e=1e-9){if(t>e)return new Array(r.rows+1).fill(0);for(var s=r.addRow(n,[0]),a=0;a<s.rows;a++)Math.abs(s.get(a,0))<i&&s.set(a,0,0);return s.to1DArray()}function Hl(t,r={}){const{thresholdValue:n=1e-9,thresholdError:i=1e-9}=r;for(var e=t.rows,s=new C(e,e),a=0;a<e;a++){var o=C.columnVector(t.getRow(a)),l=t.subMatrixRow(Jl(e,a)).transposeView(),f=new Qt(l),u=f.solve(o),h=gi(C.sub(o,l.mmul(u)).abs().to1DArray());s.setRow(a,Zl(h,u,a,n,i))}return s}class fn{constructor(r,n={}){const{assumeSymmetric:i=!1}=n;if(r=ct.checkMatrix(r),!r.isSquare())throw new Error("Matrix is not a square matrix");var e=r.columns,s=Yr(e,e,0),a=new Array(e),o=new Array(e),l=r,f,u,h=!1;if(i?h=!0:h=r.isSymmetric(),h){for(f=0;f<e;f++)for(u=0;u<e;u++)s[f][u]=l.get(f,u);jl(e,o,a,s),tf(e,o,a,s)}else{var m=Yr(e,e,0),y=new Array(e);for(u=0;u<e;u++)for(f=0;f<e;f++)m[f][u]=l.get(f,u);rf(e,m,y,s),ef(e,o,a,s,m)}this.n=e,this.e=o,this.d=a,this.V=s}get realEigenvalues(){return this.d}get imaginaryEigenvalues(){return this.e}get eigenvectorMatrix(){return C.isMatrix(this.V)||(this.V=new C(this.V)),this.V}get diagonalMatrix(){var r=this.n,n=this.e,i=this.d,e=new C(r,r),s,a;for(s=0;s<r;s++){for(a=0;a<r;a++)e[s][a]=0;e[s][s]=i[s],n[s]>0?e[s][s+1]=n[s]:n[s]<0&&(e[s][s-1]=n[s])}return e}}function jl(t,r,n,i){var e,s,a,o,l,f,u,h;for(l=0;l<t;l++)n[l]=i[t-1][l];for(o=t-1;o>0;o--){for(h=0,a=0,f=0;f<o;f++)h=h+Math.abs(n[f]);if(h===0)for(r[o]=n[o-1],l=0;l<o;l++)n[l]=i[o-1][l],i[o][l]=0,i[l][o]=0;else{for(f=0;f<o;f++)n[f]/=h,a+=n[f]*n[f];for(e=n[o-1],s=Math.sqrt(a),e>0&&(s=-s),r[o]=h*s,a=a-e*s,n[o-1]=e-s,l=0;l<o;l++)r[l]=0;for(l=0;l<o;l++){for(e=n[l],i[l][o]=e,s=r[l]+i[l][l]*e,f=l+1;f<=o-1;f++)s+=i[f][l]*n[f],r[f]+=i[f][l]*e;r[l]=s}for(e=0,l=0;l<o;l++)r[l]/=a,e+=r[l]*n[l];for(u=e/(a+a),l=0;l<o;l++)r[l]-=u*n[l];for(l=0;l<o;l++){for(e=n[l],s=r[l],f=l;f<=o-1;f++)i[f][l]-=e*r[f]+s*n[f];n[l]=i[o-1][l],i[o][l]=0}}n[o]=a}for(o=0;o<t-1;o++){if(i[t-1][o]=i[o][o],i[o][o]=1,a=n[o+1],a!==0){for(f=0;f<=o;f++)n[f]=i[f][o+1]/a;for(l=0;l<=o;l++){for(s=0,f=0;f<=o;f++)s+=i[f][o+1]*i[f][l];for(f=0;f<=o;f++)i[f][l]-=s*n[f]}}for(f=0;f<=o;f++)i[f][o+1]=0}for(l=0;l<t;l++)n[l]=i[t-1][l],i[t-1][l]=0;i[t-1][t-1]=1,r[0]=0}function tf(t,r,n,i){var e,s,a,o,l,f,u,h,m,y,d,_,E,p,b,q;for(a=1;a<t;a++)r[a-1]=r[a];r[t-1]=0;var O=0,T=0,$=Number.EPSILON;for(f=0;f<t;f++){for(T=Math.max(T,Math.abs(n[f])+Math.abs(r[f])),u=f;u<t&&!(Math.abs(r[u])<=$*T);)u++;if(u>f)do{for(e=n[f],h=(n[f+1]-e)/(2*r[f]),m=Et(h,1),h<0&&(m=-m),n[f]=r[f]/(h+m),n[f+1]=r[f]*(h+m),y=n[f+1],s=e-n[f],a=f+2;a<t;a++)n[a]-=s;for(O=O+s,h=n[u],d=1,_=d,E=d,p=r[f+1],b=0,q=0,a=u-1;a>=f;a--)for(E=_,_=d,q=b,e=d*r[a],s=d*h,m=Et(h,r[a]),r[a+1]=b*m,b=r[a]/m,d=h/m,h=d*n[a]-b*e,n[a+1]=s+b*(d*e+b*n[a]),l=0;l<t;l++)s=i[l][a+1],i[l][a+1]=b*i[l][a]+d*s,i[l][a]=d*i[l][a]-b*s;h=-b*q*E*p*r[f]/y,r[f]=b*h,n[f]=d*h}while(Math.abs(r[f])>$*T);n[f]=n[f]+O,r[f]=0}for(a=0;a<t-1;a++){for(l=a,h=n[a],o=a+1;o<t;o++)n[o]<h&&(l=o,h=n[o]);if(l!==a)for(n[l]=n[a],n[a]=h,o=0;o<t;o++)h=i[o][a],i[o][a]=i[o][l],i[o][l]=h}}function rf(t,r,n,i){var e=0,s=t-1,a,o,l,f,u,h,m;for(h=e+1;h<=s-1;h++){for(m=0,f=h;f<=s;f++)m=m+Math.abs(r[f][h-1]);if(m!==0){for(l=0,f=s;f>=h;f--)n[f]=r[f][h-1]/m,l+=n[f]*n[f];for(o=Math.sqrt(l),n[h]>0&&(o=-o),l=l-n[h]*o,n[h]=n[h]-o,u=h;u<t;u++){for(a=0,f=s;f>=h;f--)a+=n[f]*r[f][u];for(a=a/l,f=h;f<=s;f++)r[f][u]-=a*n[f]}for(f=0;f<=s;f++){for(a=0,u=s;u>=h;u--)a+=n[u]*r[f][u];for(a=a/l,u=h;u<=s;u++)r[f][u]-=a*n[u]}n[h]=m*n[h],r[h][h-1]=m*o}}for(f=0;f<t;f++)for(u=0;u<t;u++)i[f][u]=f===u?1:0;for(h=s-1;h>=e+1;h--)if(r[h][h-1]!==0){for(f=h+1;f<=s;f++)n[f]=r[f][h-1];for(u=h;u<=s;u++){for(o=0,f=h;f<=s;f++)o+=n[f]*i[f][u];for(o=o/n[h]/r[h][h-1],f=h;f<=s;f++)i[f][u]+=o*n[f]}}}function ef(t,r,n,i,e){var s=t-1,a=0,o=t-1,l=Number.EPSILON,f=0,u=0,h=0,m=0,y=0,d=0,_=0,E=0,p,b,q,O,T,$,F,R,V,G,J,w,k,I,S;for(p=0;p<t;p++)for((p<a||p>o)&&(n[p]=e[p][p],r[p]=0),b=Math.max(p-1,0);b<t;b++)u=u+Math.abs(e[p][b]);for(;s>=a;){for(O=s;O>a&&(d=Math.abs(e[O-1][O-1])+Math.abs(e[O][O]),d===0&&(d=u),!(Math.abs(e[O][O-1])<l*d));)O--;if(O===s)e[s][s]=e[s][s]+f,n[s]=e[s][s],r[s]=0,s--,E=0;else if(O===s-1){if(F=e[s][s-1]*e[s-1][s],h=(e[s-1][s-1]-e[s][s])/2,m=h*h+F,_=Math.sqrt(Math.abs(m)),e[s][s]=e[s][s]+f,e[s-1][s-1]=e[s-1][s-1]+f,R=e[s][s],m>=0){for(_=h>=0?h+_:h-_,n[s-1]=R+_,n[s]=n[s-1],_!==0&&(n[s]=R-F/_),r[s-1]=0,r[s]=0,R=e[s][s-1],d=Math.abs(R)+Math.abs(_),h=R/d,m=_/d,y=Math.sqrt(h*h+m*m),h=h/y,m=m/y,b=s-1;b<t;b++)_=e[s-1][b],e[s-1][b]=m*_+h*e[s][b],e[s][b]=m*e[s][b]-h*_;for(p=0;p<=s;p++)_=e[p][s-1],e[p][s-1]=m*_+h*e[p][s],e[p][s]=m*e[p][s]-h*_;for(p=a;p<=o;p++)_=i[p][s-1],i[p][s-1]=m*_+h*i[p][s],i[p][s]=m*i[p][s]-h*_}else n[s-1]=R+h,n[s]=R+h,r[s-1]=_,r[s]=-_;s=s-2,E=0}else{if(R=e[s][s],V=0,F=0,O<s&&(V=e[s-1][s-1],F=e[s][s-1]*e[s-1][s]),E===10){for(f+=R,p=a;p<=s;p++)e[p][p]-=R;d=Math.abs(e[s][s-1])+Math.abs(e[s-1][s-2]),R=V=.75*d,F=-.4375*d*d}if(E===30&&(d=(V-R)/2,d=d*d+F,d>0)){for(d=Math.sqrt(d),V<R&&(d=-d),d=R-F/((V-R)/2+d),p=a;p<=s;p++)e[p][p]-=d;f+=d,R=V=F=.964}for(E=E+1,T=s-2;T>=O&&(_=e[T][T],y=R-_,d=V-_,h=(y*d-F)/e[T+1][T]+e[T][T+1],m=e[T+1][T+1]-_-y-d,y=e[T+2][T+1],d=Math.abs(h)+Math.abs(m)+Math.abs(y),h=h/d,m=m/d,y=y/d,!(T===O||Math.abs(e[T][T-1])*(Math.abs(m)+Math.abs(y))<l*(Math.abs(h)*(Math.abs(e[T-1][T-1])+Math.abs(_)+Math.abs(e[T+1][T+1])))));)T--;for(p=T+2;p<=s;p++)e[p][p-2]=0,p>T+2&&(e[p][p-3]=0);for(q=T;q<=s-1&&(I=q!==s-1,q!==T&&(h=e[q][q-1],m=e[q+1][q-1],y=I?e[q+2][q-1]:0,R=Math.abs(h)+Math.abs(m)+Math.abs(y),R!==0&&(h=h/R,m=m/R,y=y/R)),R!==0);q++)if(d=Math.sqrt(h*h+m*m+y*y),h<0&&(d=-d),d!==0){for(q!==T?e[q][q-1]=-d*R:O!==T&&(e[q][q-1]=-e[q][q-1]),h=h+d,R=h/d,V=m/d,_=y/d,m=m/h,y=y/h,b=q;b<t;b++)h=e[q][b]+m*e[q+1][b],I&&(h=h+y*e[q+2][b],e[q+2][b]=e[q+2][b]-h*_),e[q][b]=e[q][b]-h*R,e[q+1][b]=e[q+1][b]-h*V;for(p=0;p<=Math.min(s,q+3);p++)h=R*e[p][q]+V*e[p][q+1],I&&(h=h+_*e[p][q+2],e[p][q+2]=e[p][q+2]-h*y),e[p][q]=e[p][q]-h,e[p][q+1]=e[p][q+1]-h*m;for(p=a;p<=o;p++)h=R*i[p][q]+V*i[p][q+1],I&&(h=h+_*i[p][q+2],i[p][q+2]=i[p][q+2]-h*y),i[p][q]=i[p][q]-h,i[p][q+1]=i[p][q+1]-h*m}}}if(u!==0){for(s=t-1;s>=0;s--)if(h=n[s],m=r[s],m===0)for(O=s,e[s][s]=1,p=s-1;p>=0;p--){for(F=e[p][p]-h,y=0,b=O;b<=s;b++)y=y+e[p][b]*e[b][s];if(r[p]<0)_=F,d=y;else if(O=p,r[p]===0?e[p][s]=F!==0?-y/F:-y/(l*u):(R=e[p][p+1],V=e[p+1][p],m=(n[p]-h)*(n[p]-h)+r[p]*r[p],$=(R*d-_*y)/m,e[p][s]=$,e[p+1][s]=Math.abs(R)>Math.abs(_)?(-y-F*$)/R:(-d-V*$)/_),$=Math.abs(e[p][s]),l*$*$>1)for(b=p;b<=s;b++)e[b][s]=e[b][s]/$}else if(m<0)for(O=s-1,Math.abs(e[s][s-1])>Math.abs(e[s-1][s])?(e[s-1][s-1]=m/e[s][s-1],e[s-1][s]=-(e[s][s]-h)/e[s][s-1]):(S=Ar(0,-e[s-1][s],e[s-1][s-1]-h,m),e[s-1][s-1]=S[0],e[s-1][s]=S[1]),e[s][s-1]=0,e[s][s]=1,p=s-2;p>=0;p--){for(G=0,J=0,b=O;b<=s;b++)G=G+e[p][b]*e[b][s-1],J=J+e[p][b]*e[b][s];if(F=e[p][p]-h,r[p]<0)_=F,y=G,d=J;else if(O=p,r[p]===0?(S=Ar(-G,-J,F,m),e[p][s-1]=S[0],e[p][s]=S[1]):(R=e[p][p+1],V=e[p+1][p],w=(n[p]-h)*(n[p]-h)+r[p]*r[p]-m*m,k=(n[p]-h)*2*m,w===0&&k===0&&(w=l*u*(Math.abs(F)+Math.abs(m)+Math.abs(R)+Math.abs(V)+Math.abs(_))),S=Ar(R*y-_*G+m*J,R*d-_*J-m*G,w,k),e[p][s-1]=S[0],e[p][s]=S[1],Math.abs(R)>Math.abs(_)+Math.abs(m)?(e[p+1][s-1]=(-G-F*e[p][s-1]+m*e[p][s])/R,e[p+1][s]=(-J-F*e[p][s]-m*e[p][s-1])/R):(S=Ar(-y-V*e[p][s-1],-d-V*e[p][s],_,m),e[p+1][s-1]=S[0],e[p+1][s]=S[1])),$=Math.max(Math.abs(e[p][s-1]),Math.abs(e[p][s])),l*$*$>1)for(b=p;b<=s;b++)e[b][s-1]=e[b][s-1]/$,e[b][s]=e[b][s]/$}for(p=0;p<t;p++)if(p<a||p>o)for(b=p;b<t;b++)i[p][b]=e[p][b];for(b=t-1;b>=a;b--)for(p=a;p<=o;p++){for(_=0,q=a;q<=Math.min(b,o);q++)_=_+i[p][q]*e[q][b];i[p][b]=_}}}function Ar(t,r,n,i){var e,s;return Math.abs(n)>Math.abs(i)?(e=i/n,s=n+e*i,[(t+e*r)/s,(r-e*t)/s]):(e=n/i,s=i+e*n,[(e*t+r)/s,(e*r-t)/s])}class un{constructor(r){if(r=ct.checkMatrix(r),!r.isSymmetric())throw new Error("Matrix is not symmetric");var n=r,i=n.rows,e=new C(i,i),s=!0,a,o,l;for(o=0;o<i;o++){var f=e[o],u=0;for(l=0;l<o;l++){var h=e[l],m=0;for(a=0;a<l;a++)m+=h[a]*f[a];f[l]=m=(n.get(o,l)-m)/e[l][l],u=u+m*m}for(u=n.get(o,o)-u,s&=u>0,e[o][o]=Math.sqrt(Math.max(u,0)),l=o+1;l<i;l++)e[o][l]=0}if(!s)throw new Error("Matrix is not positive definite");this.L=e}solve(r){r=ct.checkMatrix(r);var n=this.L,i=n.rows;if(r.rows!==i)throw new Error("Matrix dimensions do not match");var e=r.columns,s=r.clone(),a,o,l;for(l=0;l<i;l++)for(o=0;o<e;o++){for(a=0;a<l;a++)s[l][o]-=s[a][o]*n[l][a];s[l][o]/=n[l][l]}for(l=i-1;l>=0;l--)for(o=0;o<e;o++){for(a=l+1;a<i;a++)s[l][o]-=s[a][o]*n[a][l];s[l][o]/=n[l][l]}return s}get lowerTriangularMatrix(){return this.L}}const nf=Object.freeze(Object.defineProperty({__proto__:null,CHO:un,CholeskyDecomposition:un,EVD:fn,EigenvalueDecomposition:fn,LU:Ur,LuDecomposition:Ur,Matrix:C,QR:Ne,QrDecomposition:Ne,SVD:Qt,SingularValueDecomposition:Qt,WrapperMatrix1D:di,WrapperMatrix2D:ct,abstractMatrix:wr,default:C,inverse:Ql,linearDependencies:Hl,solve:yi,wrap:Gl},Symbol.toStringTag,{value:"Module"})),sf=vi(nf);function _i(t,r){let n=0;for(let i=0;i<t.length;i++)n+=(t[i]-r[i])*(t[i]-r[i]);return n}function af(t,r){return Math.sqrt(_i(t,r))}const of=Object.freeze(Object.defineProperty({__proto__:null,euclidean:af,squaredEuclidean:_i},Symbol.toStringTag,{value:"Module"})),lf=vi(of);var ne,hn;function ff(){if(hn)return ne;hn=1;const{squaredEuclidean:t}=lf,r={sigma:1};class n{constructor(e){e=Object.assign({},r,e),this.sigma=e.sigma,this.divisor=2*e.sigma*e.sigma}compute(e,s){const a=t(e,s);return Math.exp(-a/this.divisor)}}return ne=n,ne}var ie,cn;function uf(){if(cn)return ie;cn=1;const t={degree:1,constant:1,scale:1};class r{constructor(i){i=Object.assign({},t,i),this.degree=i.degree,this.constant=i.constant,this.scale=i.scale}compute(i,e){for(var s=0,a=0;a<i.length;a++)s+=i[a]*e[a];return Math.pow(this.scale*s+this.constant,this.degree)}}return ie=r,ie}var se,vn;function hf(){if(vn)return se;vn=1;const t={sigma:1,degree:1};class r{constructor(i){i=Object.assign({},t,i),this.sigma=i.sigma,this.degree=i.degree}compute(i,e){for(var s=0,a=Math.min(i.length,e.length),o=1;o<=a;++o)s+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(i[o-1],o)-Math.pow(e[o-1],o),2)),this.degree);return s}}return se=r,se}var ae,gn;function dr(){if(gn)return ae;gn=1;function t(n,i){for(var e=0,s=0;s<n.length;s++)e+=(n[s]-i[s])*(n[s]-i[s]);return e}function r(n,i){return Math.sqrt(t(n,i))}return ae=r,r.squared=t,ae}var oe,mn;function cf(){if(mn)return oe;mn=1;const t=dr().squared,r={sigma:1};class n{constructor(e){e=Object.assign({},r,e),this.sigma=e.sigma}compute(e,s){return 1/(1+t(e,s)/(this.sigma*this.sigma))}}return oe=n,oe}var le,pn;function vf(){if(pn)return le;pn=1;const t=dr(),r={sigma:1};class n{constructor(e){e=Object.assign({},r,e),this.sigma=e.sigma,this.divisor=2*e.sigma*e.sigma}compute(e,s){const a=t(e,s);return Math.exp(-a/this.divisor)}}return le=n,le}var fe,wn;function gf(){if(wn)return fe;wn=1;class t{compute(n,i){for(var e=Math.min(n.length,i.length),s=0,a=0;a<e;++a)s+=Math.min(n[a],i[a]);return s}}return fe=t,fe}var ue,dn;function mf(){if(dn)return ue;dn=1;const t=dr(),r={sigma:1};class n{constructor(e){e=Object.assign({},r,e),this.sigma=e.sigma}compute(e,s){const a=t(e,s);return Math.exp(-a/this.sigma)}}return ue=n,ue}var he,yn;function pf(){if(yn)return he;yn=1;const t=dr().squared,r={constant:1};class n{constructor(e){e=Object.assign({},r,e),this.constant=e.constant}compute(e,s){return Math.sqrt(t(e,s)+this.constant*this.constant)}}return he=n,he}var ce,_n;function wf(){if(_n)return ce;_n=1;const t=dr().squared,r={constant:1};class n{constructor(e){e=Object.assign({},r,e),this.constant=e.constant}compute(e,s){const a=t(e,s);return 1-a/(a+this.constant)}}return ce=n,ce}var ve,bn;function df(){if(bn)return ve;bn=1;const t={alpha:.01,constant:-Math.E};class r{constructor(i){i=Object.assign({},t,i),this.alpha=i.alpha,this.constant=i.constant}compute(i,e){for(var s=0,a=0;a<i.length;a++)s+=i[a]*e[a];return Math.tanh(this.alpha*s+this.constant)}}return ve=r,ve}var ge,Mn;function yf(){if(Mn)return ge;Mn=1;const t=sf.Matrix,r=ff(),n=uf(),i=hf(),e=cf(),s=vf(),a=gf(),o=mf(),l=pf(),f=wf(),u=df(),h={gaussian:r,rbf:r,polynomial:n,poly:n,anova:i,cauchy:e,exponential:s,histogram:a,min:a,laplacian:o,multiquadratic:l,rational:f,sigmoid:u,mlp:u};class m{constructor(d,_){if(this.kernelType=d,d!=="linear")if(typeof d=="string"){d=d.toLowerCase();var E=h[d];if(E)this.kernelFunction=new E(_);else throw new Error("unsupported kernel type: "+d)}else if(typeof d=="object"&&typeof d.compute=="function")this.kernelFunction=d;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(d,_){if(_===void 0&&(_=d),this.kernelType==="linear"){var E=new t(d);return E.mmul(new t(_).transposeView())}const p=new t(d.length,_.length);var b,q;if(d===_)for(b=0;b<d.length;b++)for(q=b;q<d.length;q++)p[b][q]=p[q][b]=this.kernelFunction.compute(d[b],d[q]);else for(b=0;b<d.length;b++)for(q=0;q<_.length;q++)p[b][q]=this.kernelFunction.compute(d[b],_[q]);return p}}return ge=m,ge}var Sr={},me={},xn;function bi(){return xn||(xn=1,function(t){function r(n,i){return n-i}t.sum=function(i){for(var e=0,s=0;s<i.length;s++)e+=i[s];return e},t.max=function(i){for(var e=i[0],s=i.length,a=1;a<s;a++)i[a]>e&&(e=i[a]);return e},t.min=function(i){for(var e=i[0],s=i.length,a=1;a<s;a++)i[a]<e&&(e=i[a]);return e},t.minMax=function(i){for(var e=i[0],s=i[0],a=i.length,o=1;o<a;o++)i[o]<e&&(e=i[o]),i[o]>s&&(s=i[o]);return{min:e,max:s}},t.arithmeticMean=function(i){for(var e=0,s=i.length,a=0;a<s;a++)e+=i[a];return e/s},t.mean=t.arithmeticMean,t.geometricMean=function(i){for(var e=1,s=i.length,a=0;a<s;a++)e*=i[a];return Math.pow(e,1/s)},t.logMean=function(i){for(var e=0,s=i.length,a=0;a<s;a++)e+=Math.log(i[a]);return e/s},t.grandMean=function(i,e){for(var s=0,a=0,o=i.length,l=0;l<o;l++)s+=e[l]*i[l],a+=e[l];return s/a},t.truncatedMean=function(i,e,s){s===void 0&&(s=!1),s||(i=[].concat(i).sort(r));for(var a=i.length,o=Math.floor(a*e),l=0,f=o;f<a-o;f++)l+=i[f];return l/(a-2*o)},t.harmonicMean=function(i){for(var e=0,s=i.length,a=0;a<s;a++){if(i[a]===0)throw new RangeError("value at index "+a+"is zero");e+=1/i[a]}return s/e},t.contraHarmonicMean=function(i){for(var e=0,s=0,a=i.length,o=0;o<a;o++)e+=i[o]*i[o],s+=i[o];if(s<0)throw new RangeError("sum of values is negative");return e/s},t.median=function(i,e){e===void 0&&(e=!1),e||(i=[].concat(i).sort(r));var s=i.length,a=Math.floor(s/2);return s%2===0?(i[a-1]+i[a])*.5:i[a]},t.variance=function(i,e){e===void 0&&(e=!0);for(var s=t.mean(i),a=0,o=i.length,l=0;l<o;l++){var f=i[l]-s;a+=f*f}return e?a/(o-1):a/o},t.standardDeviation=function(i,e){return Math.sqrt(t.variance(i,e))},t.standardError=function(i){return t.standardDeviation(i)/Math.sqrt(i.length)},t.robustMeanAndStdev=function(i){var e=0,s=0,a=i.length,o=0;for(o=0;o<a;o++)e+=i[o];e/=a;var l=new Array(a);for(o=0;o<a;o++)l[o]=Math.abs(i[o]-e);return l.sort(r),a%2===1?s=l[(a-1)/2]/.6745:s=.5*(l[a/2]+l[a/2-1])/.6745,{mean:e,stdev:s}},t.quartiles=function(i,e){typeof e>"u"&&(e=!1),e||(i=[].concat(i).sort(r));var s=i.length/4,a=i[Math.ceil(s)-1],o=t.median(i,!0),l=i[Math.ceil(s*3)-1];return{q1:a,q2:o,q3:l}},t.pooledStandardDeviation=function(i,e){return Math.sqrt(t.pooledVariance(i,e))},t.pooledVariance=function(i,e){typeof e>"u"&&(e=!0);for(var s=0,a=0,o=i.length,l=0;l<o;l++){var f=i[l],u=t.variance(f);s+=(f.length-1)*u,e?a+=f.length-1:a+=f.length}return s/a},t.mode=function(i){var e=i.length,s=new Array(e),a;for(a=0;a<e;a++)s[a]=0;var o=new Array(e),l=0;for(a=0;a<e;a++){var f=o.indexOf(i[a]);f>=0?s[f]++:(o[l]=i[a],s[l]=1,l++)}var u=0,h=0;for(a=0;a<l;a++)s[a]>u&&(u=s[a],h=a);return o[h]},t.covariance=function(i,e,s){typeof s>"u"&&(s=!0);var a=t.mean(i),o=t.mean(e);if(i.length!==e.length)throw"Vectors do not have the same dimensions";for(var l=0,f=i.length,u=0;u<f;u++){var h=i[u]-a,m=e[u]-o;l+=h*m}return s?l/(f-1):l/f},t.skewness=function(i,e){typeof e>"u"&&(e=!0);for(var s=t.mean(i),a=0,o=0,l=i.length,f=0;f<l;f++){var u=i[f]-s;a+=u*u,o+=u*u*u}var h=a/l,m=o/l,y=m/Math.pow(h,3/2);if(e){var d=Math.sqrt(l*(l-1)),_=l-2;return d/_*y}else return y},t.kurtosis=function(i,e){typeof e>"u"&&(e=!0);for(var s=t.mean(i),a=i.length,o=0,l=0,f=0;f<a;f++){var u=i[f]-s;o+=u*u,l+=u*u*u*u}var h=o/a,m=l/a;if(e){var y=o/(a-1),d=a*(a+1)/((a-1)*(a-2)*(a-3)),_=l/(y*y),E=(a-1)*(a-1)/((a-2)*(a-3));return d*_-3*E}else return m/(h*h)-3},t.entropy=function(i,e){typeof e>"u"&&(e=0);for(var s=0,a=i.length,o=0;o<a;o++)s+=i[o]*Math.log(i[o]+e);return-s},t.weightedMean=function(i,e){for(var s=0,a=i.length,o=0;o<a;o++)s+=i[o]*e[o];return s},t.weightedStandardDeviation=function(i,e){return Math.sqrt(t.weightedVariance(i,e))},t.weightedVariance=function(i,e){for(var s=t.weightedMean(i,e),a=0,o=i.length,l=0,f=0,u=0;u<o;u++){var h=i[u]-s,m=e[u];a+=m*(h*h),f+=m,l+=m*m}return a*(f/(f*f-l))},t.center=function(i,e){typeof e>"u"&&(e=!1);var s=i;e||(s=[].concat(i));for(var a=t.mean(s),o=s.length,l=0;l<o;l++)s[l]-=a},t.standardize=function(i,e,s){typeof e>"u"&&(e=t.standardDeviation(i)),typeof s>"u"&&(s=!1);for(var a=i.length,o=s?i:new Array(a),l=0;l<a;l++)o[l]=i[l]/e;return o},t.cumulativeSum=function(i){var e=i.length,s=new Array(e);s[0]=i[0];for(var a=1;a<e;a++)s[a]=s[a-1]+i[a];return s}}(me)),me}var pe={},En;function _f(){return En||(En=1,function(t){var r=bi();function n(i,e){return i-e}t.max=function(e){for(var s=-1/0,a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)e[a][o]>s&&(s=e[a][o]);return s},t.min=function(e){for(var s=1/0,a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)e[a][o]<s&&(s=e[a][o]);return s},t.minMax=function(e){for(var s=1/0,a=-1/0,o=0;o<e.length;o++)for(var l=0;l<e[o].length;l++)e[o][l]<s&&(s=e[o][l]),e[o][l]>a&&(a=e[o][l]);return{min:s,max:a}},t.entropy=function(e,s){typeof s>"u"&&(s=0);for(var a=0,o=e.length,l=e[0].length,f=0;f<o;f++)for(var u=0;u<l;u++)a+=e[f][u]*Math.log(e[f][u]+s);return-a},t.mean=function(e,s){typeof s>"u"&&(s=0);var a=e.length,o=e[0].length,l,f,u,h;if(s===-1){for(l=[0],f=a*o,u=0;u<a;u++)for(h=0;h<o;h++)l[0]+=e[u][h];l[0]/=f}else if(s===0)for(l=new Array(o),f=a,h=0;h<o;h++){for(l[h]=0,u=0;u<a;u++)l[h]+=e[u][h];l[h]/=f}else if(s===1)for(l=new Array(a),f=o,h=0;h<a;h++){for(l[h]=0,u=0;u<o;u++)l[h]+=e[h][u];l[h]/=f}else throw new Error("Invalid dimension");return l},t.sum=function(e,s){typeof s>"u"&&(s=0);var a=e.length,o=e[0].length,l,f,u;if(s===-1)for(l=[0],f=0;f<a;f++)for(u=0;u<o;u++)l[0]+=e[f][u];else if(s===0)for(l=new Array(o),u=0;u<o;u++)for(l[u]=0,f=0;f<a;f++)l[u]+=e[f][u];else if(s===1)for(l=new Array(a),u=0;u<a;u++)for(l[u]=0,f=0;f<o;f++)l[u]+=e[u][f];else throw new Error("Invalid dimension");return l},t.product=function(e,s){typeof s>"u"&&(s=0);var a=e.length,o=e[0].length,l,f,u;if(s===-1)for(l=[1],f=0;f<a;f++)for(u=0;u<o;u++)l[0]*=e[f][u];else if(s===0)for(l=new Array(o),u=0;u<o;u++)for(l[u]=1,f=0;f<a;f++)l[u]*=e[f][u];else if(s===1)for(l=new Array(a),u=0;u<a;u++)for(l[u]=1,f=0;f<o;f++)l[u]*=e[u][f];else throw new Error("Invalid dimension");return l},t.standardDeviation=function(e,s,a){for(var o=t.variance(e,s,a),l=o.length,f=0;f<l;f++)o[f]=Math.sqrt(o[f]);return o},t.variance=function(e,s,a){typeof a>"u"&&(a=!0),s=s||t.mean(e);var o=e.length;if(o===0)return[];for(var l=e[0].length,f=new Array(l),u=0;u<l;u++){for(var h=0,m=0,y=0,d=0;d<o;d++)y=e[d][u]-s[u],h+=y,m+=y*y;a?f[u]=(m-h*h/o)/(o-1):f[u]=(m-h*h/o)/o}return f},t.median=function(e){for(var s=e.length,a=e[0].length,o=new Array(a),l=0;l<a;l++){for(var f=new Array(s),u=0;u<s;u++)f[u]=e[u][l];f.sort(n);var h=f.length;h%2===0?o[l]=(f[h/2]+f[h/2-1])*.5:o[l]=f[Math.floor(h/2)]}return o},t.mode=function(e){var s=e.length,a=e[0].length,o=new Array(a),l,f;for(l=0;l<a;l++){for(var u=new Array(s),h=0;h<s;h++)u[h]=0;var m=new Array(s),y=0;for(f=0;f<s;f++){var d=m.indexOf(e[f][l]);d>=0?u[d]++:(m[y]=e[f][l],u[y]=1,y++)}var _=0,E=0;for(f=0;f<y;f++)u[f]>_&&(_=u[f],E=f);o[l]=m[E]}return o},t.skewness=function(e,s){typeof s>"u"&&(s=!0);for(var a=t.mean(e),o=e.length,l=a.length,f=new Array(l),u=0;u<l;u++){for(var h=0,m=0,y=0;y<o;y++){var d=e[y][u]-a[u];h+=d*d,m+=d*d*d}var _=h/o,E=m/o,p=E/Math.pow(_,3/2);if(s){var b=Math.sqrt(o*(o-1)),q=o-2;f[u]=b/q*p}else f[u]=p}return f},t.kurtosis=function(e,s){typeof s>"u"&&(s=!0);for(var a=t.mean(e),o=e.length,l=e[0].length,f=new Array(l),u=0;u<l;u++){for(var h=0,m=0,y=0;y<o;y++){var d=e[y][u]-a[u];h+=d*d,m+=d*d*d*d}var _=h/o,E=m/o;if(s){var p=h/(o-1),b=o*(o+1)/((o-1)*(o-2)*(o-3)),q=m/(p*p),O=(o-1)*(o-1)/((o-2)*(o-3));f[u]=b*q-3*O}else f[u]=E/(_*_)-3}return f},t.standardError=function(e){for(var s=e.length,a=t.standardDeviation(e),o=a.length,l=new Array(o),f=Math.sqrt(s),u=0;u<o;u++)l[u]=a[u]/f;return l},t.covariance=function(e,s){return t.scatter(e,void 0,s)},t.scatter=function(e,s,a){typeof a>"u"&&(a=0),typeof s>"u"&&(a===0?s=e.length-1:a===1&&(s=e[0].length-1));var o=t.mean(e,a),l=e.length;if(l===0)return[[]];var f=e[0].length,u,h,m,y,d;if(a===0){for(u=new Array(f),h=0;h<f;h++)u[h]=new Array(f);for(h=0;h<f;h++)for(m=h;m<f;m++){for(y=0,d=0;d<l;d++)y+=(e[d][m]-o[m])*(e[d][h]-o[h]);y/=s,u[h][m]=y,u[m][h]=y}}else if(a===1){for(u=new Array(l),h=0;h<l;h++)u[h]=new Array(l);for(h=0;h<l;h++)for(m=h;m<l;m++){for(y=0,d=0;d<f;d++)y+=(e[m][d]-o[m])*(e[h][d]-o[h]);y/=s,u[h][m]=y,u[m][h]=y}}else throw new Error("Invalid dimension");return u},t.correlation=function(e){var s=t.mean(e),a=t.standardDeviation(e,!0,s),o=t.zScores(e,s,a),l=e.length,f=e[0].length,u,h,m=new Array(f);for(u=0;u<f;u++)m[u]=new Array(f);for(u=0;u<f;u++)for(h=u;h<f;h++){for(var y=0,d=0,_=o.length;d<_;d++)y+=o[d][h]*o[d][u];y/=l-1,m[u][h]=y,m[h][u]=y}return m},t.zScores=function(e,s,a){return s=s||t.mean(e),typeof a>"u"&&(a=t.standardDeviation(e,!0,s)),t.standardize(t.center(e,s,!1),a,!0)},t.center=function(e,s,a){s=s||t.mean(e);var o=e,l=e.length,f,u,h;if(!a)for(o=new Array(l),f=0;f<l;f++)o[f]=new Array(e[f].length);for(f=0;f<l;f++){var m=o[f];for(u=0,h=m.length;u<h;u++)m[u]=e[f][u]-s[u]}return o},t.standardize=function(e,s,a){typeof s>"u"&&(s=t.standardDeviation(e));var o=e,l=e.length,f,u,h;if(!a)for(o=new Array(l),f=0;f<l;f++)o[f]=new Array(e[f].length);for(f=0;f<l;f++){var m=o[f],y=e[f];for(u=0,h=m.length;u<h;u++)s[u]!==0&&!isNaN(s[u])&&(m[u]=y[u]/s[u])}return o},t.weightedVariance=function(e,s){var a=t.mean(e),o=e.length;if(o===0)return[];for(var l=e[0].length,f=new Array(l),u=0;u<l;u++){for(var h=0,m=0,y=0,d=0;d<o;d++){var _=e[d][u]-a[u],E=s[d];h+=E*(_*_),y+=E,m+=E*E}f[u]=h*(y/(y*y-m))}return f},t.weightedMean=function(e,s,a){typeof a>"u"&&(a=0);var o=e.length;if(o===0)return[];var l=e[0].length,f,u,h,m,y,d;if(a===0){for(f=new Array(l),u=0;u<l;u++)f[u]=0;for(u=0;u<o;u++)for(d=e[u],y=s[u],m=0;m<l;m++)f[m]+=d[m]*y}else if(a===1){for(f=new Array(o),u=0;u<o;u++)f[u]=0;for(m=0;m<o;m++)for(d=e[m],y=s[m],u=0;u<l;u++)f[m]+=d[u]*y}else throw new Error("Invalid dimension");var _=r.sum(s);if(_!==0)for(u=0,h=f.length;u<h;u++)f[u]/=_;return f},t.weightedCovariance=function(e,s,a,o){o=o||0,a=a||t.weightedMean(e,s,o);for(var l=0,f=0,u=0,h=s.length;u<h;u++)l+=s[u],f+=s[u]*s[u];var m=l/(l*l-f);return t.weightedScatter(e,s,a,m,o)},t.weightedScatter=function(e,s,a,o,l){l=l||0,a=a||t.weightedMean(e,s,l),typeof o>"u"&&(o=1);var f=e.length;if(f===0)return[[]];var u=e[0].length,h,m,y,d,_;if(l===0){for(h=new Array(u),m=0;m<u;m++)h[m]=new Array(u);for(m=0;m<u;m++)for(y=m;y<u;y++){for(_=0,d=0;d<f;d++)_+=s[d]*(e[d][y]-a[y])*(e[d][m]-a[m]);h[m][y]=_*o,h[y][m]=_*o}}else if(l===1){for(h=new Array(f),m=0;m<f;m++)h[m]=new Array(f);for(m=0;m<f;m++)for(y=m;y<f;y++){for(_=0,d=0;d<u;d++)_+=s[d]*(e[y][d]-a[y])*(e[m][d]-a[m]);h[m][y]=_*o,h[y][m]=_*o}}else throw new Error("Invalid dimension");return h}}(pe)),pe}var An;function bf(){return An||(An=1,Sr.array=bi(),Sr.matrix=_f()),Sr}var we,Sn;function Mf(){if(Sn)return we;Sn=1;const t=yf(),r=bf().array;var n={C:1,tol:1e-4,maxPasses:10,maxIterations:1e4,kernel:"linear",alphaTol:1e-6,random:Math.random,whitening:!0};function i(e){this.options=Object.assign({},n,e),this.kernel=new t(this.options.kernel,this.options.kernelOptions),this.b=0}return i.prototype.train=function(e,s){if(e.length!==s.length)throw new Error("Features and labels should have the same length");if(e.length<2)throw new Error("Cannot train with less than 2 observations");if(this._trained=!1,this._loaded=!1,this.N=s.length,this.D=e[0].length,this.options.whitening){this.X=new Array(this.N);for(var a=0;a<this.N;a++)this.X[a]=new Array(this.D);this.minMax=new Array(this.D);for(var o=0;o<this.D;o++){var l=new Array(this.N);for(a=0;a<this.N;a++)l[a]=e[a][o];for(this.minMax[o]=r.minMax(l),a=0;a<this.N;a++)this.X[a][o]=(e[a][o]-this.minMax[o].min)/(this.minMax[o].max-this.minMax[o].min)}}else this.X=e;this.Y=s,this.b=0,this.W=void 0;var f=this.kernel.compute(this.X),u=s.length,h=new Array(u).fill(0);this.alphas=h;for(var m=0;m<u;m++)h[m]=0;for(var y=0,d=0,_=0,E=0,p=0,b=0,q=0,O=0,T=0,$=0,F=0;E<this.options.maxPasses&&_<this.options.maxIterations;){var R=0;for(a=0;a<u;a++)if(p=this._marginOnePrecomputed(a,f)-s[a],s[a]*p<-this.options.tol&&h[a]<this.options.C||s[a]*p>this.options.tol&&h[a]>0){for(o=a;o===a;)o=Math.floor(this.options.random()*u);if(b=this._marginOnePrecomputed(o,f)-s[o],q=h[a],O=h[o],s[a]===s[o]?(T=Math.max(0,q+O-this.options.C),$=Math.min(this.options.C,q+O)):(T=Math.max(0,O-q),$=Math.min(this.options.C,this.options.C+O+q)),Math.abs(T-$)<1e-4||(F=2*f[a][o]-f[a][a]-f[o][o],F>=0))continue;var V=h[o]-s[o]*(p-b)/F;if(V>$?V=$:V<T&&(V=T),Math.abs(O-V)<.001)continue;h[o]=V,h[a]=h[a]+s[a]*s[o]*(O-V),y=this.b-p-s[a]*(h[a]-q)*f[a][a]-s[o]*(h[o]-O)*f[a][o],d=this.b-b-s[a]*(h[a]-q)*f[a][o]-s[o]*(h[o]-O)*f[o][o],this.b=(y+d)/2,h[a]<this.options.C&&h[a]>0&&(this.b=y),h[o]<this.options.C&&h[o]>0&&(this.b=d),R+=1}_++,R===0?E+=1:E=0}if(_===this.options.maxIterations)throw new Error("max iterations reached");if(this.iterations=_,this.options.kernel==="linear"){this.W=new Array(this.D);for(var G=0;G<this.D;G++){this.W[G]=0;for(var J=0;J<u;J++)this.W[G]+=s[J]*h[J]*this.X[J][G]}}var w=[],k=[],I=[];for(this._supportVectorIdx=[],a=0;a<this.N;a++)this.alphas[a]>this.options.alphaTol&&(w.push(this.X[a]),k.push(s[a]),I.push(this.alphas[a]),this._supportVectorIdx.push(a));this.X=w,this.Y=k,this.N=w.length,this.alphas=I,this._trained=!0},i.prototype.predictOne=function(e){var s=this.marginOne(e);return s>0?1:-1},i.prototype.predict=function(e){if(!this._trained&&!this._loaded)throw new Error("Cannot predict, you need to train the SVM first");return Array.isArray(e)&&Array.isArray(e[0])?e.map(this.predictOne.bind(this)):this.predictOne(e)},i.prototype.marginOne=function(e,s){this.options.whitening&&!s&&(e=this._applyWhitening(e));var a=this.b,o;if(this.options.kernel==="linear"&&this.W)for(o=0;o<this.W.length;o++)a+=this.W[o]*e[o];else for(o=0;o<this.N;o++)a+=this.alphas[o]*this.Y[o]*this.kernel.compute([e],[this.X[o]])[0][0];return a},i.prototype._marginOnePrecomputed=function(e,s){var a=this.b,o;for(o=0;o<this.N;o++)a+=this.alphas[o]*this.Y[o]*s[e][o];return a},i.prototype.margin=function(e){return Array.isArray(e)?e.map(this.marginOne.bind(this)):this.marginOne(e)},i.prototype.supportVectors=function(){if(!this._trained&&!this._loaded)throw new Error("Cannot get support vectors, you need to train the SVM first");if(this._loaded&&this.options.kernel==="linear")throw new Error("Cannot get support vectors from saved linear model, you need to train the SVM to have them");return this._supportVectorIdx},i.load=function(e){this._loaded=!0,this._trained=!1;var s=new i(e.options);return e.options.kernel==="linear"?(s.W=e.W.slice(),s.D=s.W.length):(s.X=e.X.slice(),s.Y=e.Y.slice(),s.alphas=e.alphas.slice(),s.N=s.X.length,s.D=s.X[0].length),s.minMax=e.minMax,s.b=e.b,s._loaded=!0,s._trained=!1,s},i.prototype.toJSON=function(){if(!this._trained&&!this._loaded)throw new Error("Cannot export, you need to train the SVM first");var e={};return e.options=Object.assign({},this.options),e.b=this.b,e.minMax=this.minMax,e.options.kernel==="linear"?e.W=this.W.slice():(e.X=this.X.slice(),e.Y=this.Y.slice(),e.alphas=this.alphas.slice()),e},i.prototype._applyWhitening=function(e){if(!this.minMax)throw new Error("Could not apply whitening");for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=(e[a]-this.minMax[a].min)/(this.minMax[a].max-this.minMax[a].min);return s},we=i,we}Mf();var xf=ms(`<main class="container svelte-e1pyf"><section class="section svelte-e1pyf"><h1 class="title svelte-e1pyf">What is a Linear SVM?</h1> <p class="svelte-e1pyf">Have you guys ever wondered how banks detect fraudulent transactions or how Gmail classifies which email is spam or not? 
        Well, this is all because of the Support Vector Machines or SVMs which is a powerful algorithm that slices through complex data to uncover any hidden patterns.</p> <p class="mt-2 svelte-e1pyf">In simple terms, SVMs basically create a decision boundary that allows the machine to decide what option to pick. Let's go through how this works:</p></section> <section class="section svelte-e1pyf"><h2 class="subtitle svelte-e1pyf">The Problem</h2> <p class="svelte-e1pyf">Let's say we are looking at the different pitch types in baseball. More specifically, we will be looking at four different pitch types:</p> <p class="svelte-e1pyf">-  Four-Seam Fastball (FF)           - Cutter (FC)</p> <p class="svelte-e1pyf">- Changeup (CH)  - Slider (SL)</p> <p class="mt-4 svelte-e1pyf">Given only the Release Speed and Release Spin Rate of the ball. Lets train a machine that has no knowledge of baseball and see what pitch type it will predict based on only the Release Speed and Release Spin Rate.</p></section> <section class="section svelte-e1pyf"><h2 class="subtitle svelte-e1pyf">The Visualization</h2> <p class="svelte-e1pyf">This visualization below represents the machine after it was trained with the baseball data and the decision boundary that was calculated by the SVM. Feel free to check out all of the different Pitch Pairs and see where the decision boundary is drawn for each of the combinations.</p> <div class="scatterplot-container svelte-e1pyf"></div></section> <section class="section svelte-e1pyf"><h2 class="subtitle svelte-e1pyf">Prediction Example</h2> <p class="svelte-e1pyf">Observe that if a new data point is added to the graph, the machine will predict the pitch type to be the same as the majority pitch type on the left/right side of the decision boundary. 
        For instance, if we are looking at Pitch Pair CH & SL and the new point has a Release Speed of 87 mph and a Release Spin Rate of 2500 rpm, then the machine will predict it to be SL as the pitch type.</p></section> <section class="section svelte-e1pyf"><h2 class="subtitle svelte-e1pyf">Limitations of SVM</h2> <p class="svelte-e1pyf">However, notice that in one of the pitch pairs, there was no decision boundary drawn. This is because the data was too close to each other so it wasn't able to calculate an accurate decision boundary. 
      This is one of the weaknesses of SVMs. This explains why in some rare cases banks would mark something as a fraudulent transaction even though it is not.</p> <p class="svelte-e1pyf">Nevertheless, SVMs are still one of the most powerful algorithms that is used worldwide to train a machine to make a decision.</p></section> <section class="section svelte-e1pyf"><h2 class="subtitle svelte-e1pyf">Key Takeaway</h2> <p class="svelte-e1pyf">The Key Takeaway of this project is that we hope that people learn how the machine makes a decision behind the scenes and how vital SVM is since it calculates the decision boundary which ultimately decides 
      what decision the machine should make. With the help of our visualization, it clearly shows that without the decision boundary, the machine will be unable to make a good decision. This is how big companies like 
      Google or Meta detect spam emails or messages.</p></section> <section class="section svelte-e1pyf"><h2 class="subtitle svelte-e1pyf">The Math Behind SVM</h2> <p class="svelte-e1pyf">The idea behind maximum margin classifiers is to implement linear separability to correctly classify data into categories.<br> Support Vector Machines are a form of margin classifiers that aim to have large margins between the decision boundary and training point.</p> <p class="svelte-e1pyf">For SVMs, a support vector is a training point such that:</p> <p class="svelte-e1pyf"><!></p> <p class="svelte-e1pyf">Solutions for Hard-SVMs aim to have perfect classification with no slack; therefore, the solution for the problem becomes:</p> <p class="svelte-e1pyf"><!></p> <p class="svelte-e1pyf">Alternatively, the soft-SVM problem allows for some classifications to be wrong with distance:</p> <p class="svelte-e1pyf"><!></p> <p class="svelte-e1pyf">Where, <code>C</code> is considered the slack parameter: Large <code>C</code> avoids misclassifications with low slack and Small <code>C</code> allows for more slack at the cost of misclassifications.</p></section> <section class="section svelte-e1pyf"><h2 class="subtitle svelte-e1pyf">Resources Links</h2> <p class="svelte-e1pyf">Video Link: <a href="https://youtu.be/S2YA47COMnk" class="text-blue-600 hover:underline">CLICK HERE</a></p> <p class="svelte-e1pyf">Github Repo: <a href="https://github.com/raoguchi/svm_viz_mlb" class="text-blue-600 hover:underline">CLICK HERE</a>.</p></section></main>`);function Ef(t){let r="\\( y_i \\vec{w} \\cdot \\text{Aug}(\\vec{x}^{(i)}) = 1 \\)",n="\\( \\min_{\\vec{w}, \\vec{\\epsilon}} \\lVert{\\vec{w}}\\rVert^2 + C \\sum \\epsilon_i \\)",i="\\(y_i \\vec{w} \\cdot \\text{Aug}(\\vec{x}^{(i)}) = 1\\)";var e=xf(),s=_r(tr(e),12),a=_r(tr(s),6),o=tr(a);te(o,()=>i);var l=_r(a,4),f=tr(l);te(f,()=>r);var u=_r(l,4),h=tr(u);te(h,()=>n),ps(t,e)}new Ef({target:document.getElementById("app")});
